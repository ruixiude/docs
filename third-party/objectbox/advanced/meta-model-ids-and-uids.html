<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Meta Model, IDs, and UIDs | 文档管理中心</title>
    <meta name="generator" content="VuePress 1.8.0">
    
    <meta name="description" content="瑞修得移动开发小组文档管理中心">
    
    <link rel="preload" href="/assets/css/0.styles.e0cd40c5.css" as="style"><link rel="preload" href="/assets/js/app.708bd31f.js" as="script"><link rel="preload" href="/assets/js/2.1637da50.js" as="script"><link rel="preload" href="/assets/js/87.6942ff22.js" as="script"><link rel="prefetch" href="/assets/js/10.671ef702.js"><link rel="prefetch" href="/assets/js/100.1719235d.js"><link rel="prefetch" href="/assets/js/101.41c73b12.js"><link rel="prefetch" href="/assets/js/102.4a7c53ec.js"><link rel="prefetch" href="/assets/js/103.0a5c3a01.js"><link rel="prefetch" href="/assets/js/104.a55d0f0c.js"><link rel="prefetch" href="/assets/js/105.761a51a7.js"><link rel="prefetch" href="/assets/js/106.f2fc33ad.js"><link rel="prefetch" href="/assets/js/107.8d90051f.js"><link rel="prefetch" href="/assets/js/108.ac08dac5.js"><link rel="prefetch" href="/assets/js/109.e4ba296f.js"><link rel="prefetch" href="/assets/js/11.74d91dbd.js"><link rel="prefetch" href="/assets/js/110.8b99d3d7.js"><link rel="prefetch" href="/assets/js/111.b8079109.js"><link rel="prefetch" href="/assets/js/112.2b876618.js"><link rel="prefetch" href="/assets/js/113.8ed4fb9a.js"><link rel="prefetch" href="/assets/js/114.c7574062.js"><link rel="prefetch" href="/assets/js/115.679d2f31.js"><link rel="prefetch" href="/assets/js/116.e0690ce3.js"><link rel="prefetch" href="/assets/js/117.28a45e3d.js"><link rel="prefetch" href="/assets/js/118.532bbf52.js"><link rel="prefetch" href="/assets/js/119.81a187be.js"><link rel="prefetch" href="/assets/js/12.5a779a5e.js"><link rel="prefetch" href="/assets/js/120.4785d696.js"><link rel="prefetch" href="/assets/js/121.5e9d7e69.js"><link rel="prefetch" href="/assets/js/122.b6a3fdf0.js"><link rel="prefetch" href="/assets/js/123.6f182ec1.js"><link rel="prefetch" href="/assets/js/124.e732f420.js"><link rel="prefetch" href="/assets/js/125.9ebe2714.js"><link rel="prefetch" href="/assets/js/126.ab0e1f77.js"><link rel="prefetch" href="/assets/js/127.a1553ed7.js"><link rel="prefetch" href="/assets/js/128.06c1e104.js"><link rel="prefetch" href="/assets/js/129.c98bcfdd.js"><link rel="prefetch" href="/assets/js/13.19b1f5af.js"><link rel="prefetch" href="/assets/js/130.459a2359.js"><link rel="prefetch" href="/assets/js/131.d5c4610a.js"><link rel="prefetch" href="/assets/js/132.64ddf927.js"><link rel="prefetch" href="/assets/js/133.d9af96cb.js"><link rel="prefetch" href="/assets/js/134.28448611.js"><link rel="prefetch" href="/assets/js/135.a1940886.js"><link rel="prefetch" href="/assets/js/136.47630df4.js"><link rel="prefetch" href="/assets/js/137.d1302ead.js"><link rel="prefetch" href="/assets/js/138.076aa01b.js"><link rel="prefetch" href="/assets/js/139.840c94af.js"><link rel="prefetch" href="/assets/js/14.68ae7e90.js"><link rel="prefetch" href="/assets/js/140.285e384c.js"><link rel="prefetch" href="/assets/js/141.53100d40.js"><link rel="prefetch" href="/assets/js/142.8751ffcd.js"><link rel="prefetch" href="/assets/js/143.6a99ea4e.js"><link rel="prefetch" href="/assets/js/144.92ed9788.js"><link rel="prefetch" href="/assets/js/145.46d45fe6.js"><link rel="prefetch" href="/assets/js/146.0d5e1907.js"><link rel="prefetch" href="/assets/js/147.1d45b414.js"><link rel="prefetch" href="/assets/js/148.3c1d7857.js"><link rel="prefetch" href="/assets/js/149.6e71cd9c.js"><link rel="prefetch" href="/assets/js/15.e4274f77.js"><link rel="prefetch" href="/assets/js/16.29ac15df.js"><link rel="prefetch" href="/assets/js/17.79577068.js"><link rel="prefetch" href="/assets/js/18.7aa649ac.js"><link rel="prefetch" href="/assets/js/19.ce2c2516.js"><link rel="prefetch" href="/assets/js/20.c6f145a7.js"><link rel="prefetch" href="/assets/js/21.96ad3811.js"><link rel="prefetch" href="/assets/js/22.e12d52e2.js"><link rel="prefetch" href="/assets/js/23.5d518d64.js"><link rel="prefetch" href="/assets/js/24.7681a4d8.js"><link rel="prefetch" href="/assets/js/25.3a25fa62.js"><link rel="prefetch" href="/assets/js/26.07718401.js"><link rel="prefetch" href="/assets/js/27.8743f90e.js"><link rel="prefetch" href="/assets/js/28.b4d6b486.js"><link rel="prefetch" href="/assets/js/29.aedc0020.js"><link rel="prefetch" href="/assets/js/3.3c077cdd.js"><link rel="prefetch" href="/assets/js/30.64c38825.js"><link rel="prefetch" href="/assets/js/31.90d7dc8b.js"><link rel="prefetch" href="/assets/js/32.5ccb0e26.js"><link rel="prefetch" href="/assets/js/33.8fb12054.js"><link rel="prefetch" href="/assets/js/34.814b9e5c.js"><link rel="prefetch" href="/assets/js/35.314a3788.js"><link rel="prefetch" href="/assets/js/36.dd90c802.js"><link rel="prefetch" href="/assets/js/37.ea6b2a06.js"><link rel="prefetch" href="/assets/js/38.be6dbf17.js"><link rel="prefetch" href="/assets/js/39.4fbc7ab4.js"><link rel="prefetch" href="/assets/js/4.b333c14c.js"><link rel="prefetch" href="/assets/js/40.e65caa31.js"><link rel="prefetch" href="/assets/js/41.36d65bc4.js"><link rel="prefetch" href="/assets/js/42.afc24694.js"><link rel="prefetch" href="/assets/js/43.ba56bb37.js"><link rel="prefetch" href="/assets/js/44.a078d196.js"><link rel="prefetch" href="/assets/js/45.53beecc1.js"><link rel="prefetch" href="/assets/js/46.d713aee5.js"><link rel="prefetch" href="/assets/js/47.ace7ed80.js"><link rel="prefetch" href="/assets/js/48.aa3d5ea2.js"><link rel="prefetch" href="/assets/js/49.e0cc3e5c.js"><link rel="prefetch" href="/assets/js/5.80d7978e.js"><link rel="prefetch" href="/assets/js/50.2bffebce.js"><link rel="prefetch" href="/assets/js/51.3bb2197c.js"><link rel="prefetch" href="/assets/js/52.30d5a6ab.js"><link rel="prefetch" href="/assets/js/53.86f280a5.js"><link rel="prefetch" href="/assets/js/54.bec1da07.js"><link rel="prefetch" href="/assets/js/55.6890ba67.js"><link rel="prefetch" href="/assets/js/56.78f10d2c.js"><link rel="prefetch" href="/assets/js/57.4d10bb23.js"><link rel="prefetch" href="/assets/js/58.e5bd72e0.js"><link rel="prefetch" href="/assets/js/59.1ccc193e.js"><link rel="prefetch" href="/assets/js/6.93c23e29.js"><link rel="prefetch" href="/assets/js/60.32570259.js"><link rel="prefetch" href="/assets/js/61.2f63bd25.js"><link rel="prefetch" href="/assets/js/62.942ce851.js"><link rel="prefetch" href="/assets/js/63.3ca6f01c.js"><link rel="prefetch" href="/assets/js/64.99d6a5a5.js"><link rel="prefetch" href="/assets/js/65.611f70c8.js"><link rel="prefetch" href="/assets/js/66.5fdebb0c.js"><link rel="prefetch" href="/assets/js/67.c69af9a7.js"><link rel="prefetch" href="/assets/js/68.f8e4e8b2.js"><link rel="prefetch" href="/assets/js/69.5a5e1c53.js"><link rel="prefetch" href="/assets/js/7.e0defabf.js"><link rel="prefetch" href="/assets/js/70.e15c66b9.js"><link rel="prefetch" href="/assets/js/71.d8817a6b.js"><link rel="prefetch" href="/assets/js/72.fddf5dc9.js"><link rel="prefetch" href="/assets/js/73.dab77603.js"><link rel="prefetch" href="/assets/js/74.8eddb38e.js"><link rel="prefetch" href="/assets/js/75.1a6011d1.js"><link rel="prefetch" href="/assets/js/76.9945f5b3.js"><link rel="prefetch" href="/assets/js/77.6ccffdef.js"><link rel="prefetch" href="/assets/js/78.4df66be0.js"><link rel="prefetch" href="/assets/js/79.f60eab5a.js"><link rel="prefetch" href="/assets/js/8.edeef7ca.js"><link rel="prefetch" href="/assets/js/80.e8dd7875.js"><link rel="prefetch" href="/assets/js/81.381e4258.js"><link rel="prefetch" href="/assets/js/82.f5d076b2.js"><link rel="prefetch" href="/assets/js/83.4af266b2.js"><link rel="prefetch" href="/assets/js/84.c8b235a0.js"><link rel="prefetch" href="/assets/js/85.e1f06807.js"><link rel="prefetch" href="/assets/js/86.de1b4ab9.js"><link rel="prefetch" href="/assets/js/88.4df7f839.js"><link rel="prefetch" href="/assets/js/89.7822a705.js"><link rel="prefetch" href="/assets/js/9.e81ad78e.js"><link rel="prefetch" href="/assets/js/90.b2708e26.js"><link rel="prefetch" href="/assets/js/91.e8a4fe8b.js"><link rel="prefetch" href="/assets/js/92.7ebcf313.js"><link rel="prefetch" href="/assets/js/93.3a4310ca.js"><link rel="prefetch" href="/assets/js/94.8464a452.js"><link rel="prefetch" href="/assets/js/95.38ca9044.js"><link rel="prefetch" href="/assets/js/96.29241883.js"><link rel="prefetch" href="/assets/js/97.b99a8e9d.js"><link rel="prefetch" href="/assets/js/98.ee4911f9.js"><link rel="prefetch" href="/assets/js/99.b99346c9.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e0cd40c5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">文档管理中心</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Third Party" class="dropdown-title"><span class="title">Third Party</span> <span class="arrow down"></span></button> <button type="button" aria-label="Third Party" class="mobile-dropdown-title"><span class="title">Third Party</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/third-party/arouter/" class="nav-link">
  ARouter
</a></li><li class="dropdown-item"><!----> <a href="/third-party/bugly/" class="nav-link">
  Bugly
</a></li><li class="dropdown-item"><!----> <a href="/third-party/dokka/" class="nav-link">
  Dokka
</a></li><li class="dropdown-item"><!----> <a href="/third-party/greendao/" class="nav-link">
  greenDAO
</a></li><li class="dropdown-item"><!----> <a href="/third-party/koin/" class="nav-link">
  Koin
</a></li><li class="dropdown-item"><!----> <a href="/third-party/mars/" class="nav-link">
  Mars
</a></li><li class="dropdown-item"><!----> <a href="/third-party/mmkv/" class="nav-link">
  MMKV
</a></li><li class="dropdown-item"><!----> <a href="/third-party/mtj/" class="nav-link">
  百度移动统计
</a></li><li class="dropdown-item"><!----> <a href="/third-party/objectbox/" class="nav-link router-link-active">
  Objectbox
</a></li><li class="dropdown-item"><!----> <a href="/third-party/okhttp/" class="nav-link">
  OkHttp
</a></li><li class="dropdown-item"><!----> <a href="/third-party/orhanobut-logger/" class="nav-link">
  Orhanobut Logger
</a></li><li class="dropdown-item"><!----> <a href="/third-party/retrofit/" class="nav-link">
  Retrofit
</a></li><li class="dropdown-item"><!----> <a href="/third-party/rxjava/" class="nav-link">
  Rxjava
</a></li><li class="dropdown-item"><!----> <a href="/third-party/sentry/" class="nav-link">
  Sentry
</a></li><li class="dropdown-item"><!----> <a href="/third-party/umeng/" class="nav-link">
  友盟+
</a></li></ul></div></div><div class="nav-item"><a href="https://ruixiude.github.io/apidocs/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  在线API文档
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Third Party" class="dropdown-title"><span class="title">Third Party</span> <span class="arrow down"></span></button> <button type="button" aria-label="Third Party" class="mobile-dropdown-title"><span class="title">Third Party</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/third-party/arouter/" class="nav-link">
  ARouter
</a></li><li class="dropdown-item"><!----> <a href="/third-party/bugly/" class="nav-link">
  Bugly
</a></li><li class="dropdown-item"><!----> <a href="/third-party/dokka/" class="nav-link">
  Dokka
</a></li><li class="dropdown-item"><!----> <a href="/third-party/greendao/" class="nav-link">
  greenDAO
</a></li><li class="dropdown-item"><!----> <a href="/third-party/koin/" class="nav-link">
  Koin
</a></li><li class="dropdown-item"><!----> <a href="/third-party/mars/" class="nav-link">
  Mars
</a></li><li class="dropdown-item"><!----> <a href="/third-party/mmkv/" class="nav-link">
  MMKV
</a></li><li class="dropdown-item"><!----> <a href="/third-party/mtj/" class="nav-link">
  百度移动统计
</a></li><li class="dropdown-item"><!----> <a href="/third-party/objectbox/" class="nav-link router-link-active">
  Objectbox
</a></li><li class="dropdown-item"><!----> <a href="/third-party/okhttp/" class="nav-link">
  OkHttp
</a></li><li class="dropdown-item"><!----> <a href="/third-party/orhanobut-logger/" class="nav-link">
  Orhanobut Logger
</a></li><li class="dropdown-item"><!----> <a href="/third-party/retrofit/" class="nav-link">
  Retrofit
</a></li><li class="dropdown-item"><!----> <a href="/third-party/rxjava/" class="nav-link">
  Rxjava
</a></li><li class="dropdown-item"><!----> <a href="/third-party/sentry/" class="nav-link">
  Sentry
</a></li><li class="dropdown-item"><!----> <a href="/third-party/umeng/" class="nav-link">
  友盟+
</a></li></ul></div></div><div class="nav-item"><a href="https://ruixiude.github.io/apidocs/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  在线API文档
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/third-party/objectbox/" aria-current="page" class="sidebar-link">ObjectBox Java (Kotlin, Android)</a></li><li><a href="/third-party/objectbox/getting-started.html" class="sidebar-link">Getting started</a></li><li><a href="/third-party/objectbox/tutoial-demo-project.html" class="sidebar-link">Tutorial: Demo Project</a></li><li><a href="/third-party/objectbox/entity-annotations.html" class="sidebar-link">Entity Annotations</a></li><li><a href="/third-party/objectbox/kotlin-support.html" class="sidebar-link">Kotlin Support</a></li><li><a href="/third-party/objectbox/queries.html" class="sidebar-link">ObjectBox Queries</a></li><li><a href="/third-party/objectbox/data-observers-and-rx.html" class="sidebar-link">Data Observers &amp; Rx</a></li><li><a href="/third-party/objectbox/relations.html" class="sidebar-link">Relations</a></li><li><a href="/third-party/objectbox/data-browser.html" class="sidebar-link">Data Browser</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Android</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Advanced</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/third-party/objectbox/advanced/advanced-setup.html" class="sidebar-link">Advanced Setup</a></li><li><a href="/third-party/objectbox/advanced/object-ids.html" class="sidebar-link">Object IDs</a></li><li><a href="/third-party/objectbox/advanced/custom-types.html" class="sidebar-link">Custom Types</a></li><li><a href="/third-party/objectbox/advanced/entity-inheritance.html" class="sidebar-link">Entity Inheritance</a></li><li><a href="/third-party/objectbox/advanced/data-model-updates.html" class="sidebar-link">Data Model Updates</a></li><li><a href="/third-party/objectbox/advanced/meta-model-ids-and-uids.html" aria-current="page" class="active sidebar-link">Meta Model, IDs, and UIDs</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/third-party/objectbox/advanced/meta-model-ids-and-uids.html#ids" class="sidebar-link">IDs</a></li><li class="sidebar-sub-header"><a href="/third-party/objectbox/advanced/meta-model-ids-and-uids.html#uids" class="sidebar-link">UIDs</a></li><li class="sidebar-sub-header"><a href="/third-party/objectbox/advanced/meta-model-ids-and-uids.html#json-for-consistent-ids" class="sidebar-link">JSON for consistent IDs</a></li><li class="sidebar-sub-header"><a href="/third-party/objectbox/advanced/meta-model-ids-and-uids.html#meta-model-synchronization" class="sidebar-link">Meta Model Synchronization</a></li><li class="sidebar-sub-header"><a href="/third-party/objectbox/advanced/meta-model-ids-and-uids.html#stable-renames-using-uids" class="sidebar-link">Stable Renames using UIDs</a></li><li class="sidebar-sub-header"><a href="/third-party/objectbox/advanced/meta-model-ids-and-uids.html#resolving-meta-model-conflicts" class="sidebar-link">Resolving Meta Model Conflicts</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/third-party/objectbox/advanced/meta-model-ids-and-uids.html#the-nuke-option" class="sidebar-link">The Nuke Option</a></li><li class="sidebar-sub-header"><a href="/third-party/objectbox/advanced/meta-model-ids-and-uids.html#manual-conflict-resolution" class="sidebar-link">Manual conflict resolution</a></li></ul></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="meta-model-ids-and-uids"><a href="#meta-model-ids-and-uids" class="header-anchor">#</a> Meta Model, IDs, and UIDs</h1> <p>Explaining the ObjectBox meta model file and how to resolve model file conflicts.</p> <p>Unlike relational databases like SQLite, ObjectBox does not require you to create a database schema. That does not mean ObjectBox is schema-less. For efficiency reasons, ObjectBox manages a <strong>meta model</strong> of the data stored. This meta model is actually ObjectBox’s equivalent of a schema. It includes known object types including all properties, indexes, etc. A key difference to relational schemas is that ObjectBox tries to manage its meta model automatically. In some cases it needs your help. That’s why we will look at some details.</p> <h2 id="ids"><a href="#ids" class="header-anchor">#</a> IDs</h2> <p>In the ObjectBox meta model, everything has an ID and a UID. IDs are used internally in ObjectBox to reference entities, properties, and indexes. For example, you have an entity “User” with the properties “id” and “name”. In the meta model the entity (type) could have the ID 42, and the properties the IDs 1 and 2. Property IDs must only be unique within their entity.</p> <p>Note: do not confuse object IDs with meta model IDs: object IDs are the values of the @Id property (see Object IDs in <a href="https://docs.objectbox.io/getting-started" target="_blank" rel="noopener noreferrer">basics<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>). In contrast, all objects are instances of the entity type associated with a single meta model ID.</p> <p>ObjectBox assigns meta model IDs sequentially  (1, 2, 3, 4, …) and keeps track of the last used ID to prevent ID collisions.</p> <h2 id="uids"><a href="#uids" class="header-anchor">#</a> UIDs</h2> <p>As a rule of thumb, for each meta model ID there’s a corresponding UID. They complement IDs and are often used in combination (e.g. in the JSON file). While IDs are assigned sequentially, UIDs are a random long value. The job of UIDs is detecting and resolving concurrent modifications of the meta model.</p> <p>A UID is unique across entities, properties, indexes, etc. Thus unlike IDs, an UID already used for an entity may not be used for a property. As a precaution to avoid side effects, ObjectBox keeps track of “retired” UIDs to ensure previously used but now abandoned UIDs are not used for new artifacts.</p> <h2 id="json-for-consistent-ids"><a href="#json-for-consistent-ids" class="header-anchor">#</a> JSON for consistent IDs</h2> <p>ObjectBox stores a part of its meta model in a JSON file. This file should be available to every developer and thus checked into a source version control system (e.g. git). The main purpose of this JSON file is to ensure consistent IDs and UIDs in the meta model across devices.</p> <p>This JSON file is stored in the file objectbox-models/default.json. For example, look at the file from the <a href="https://github.com/greenrobot/ObjectBoxExamples" target="_blank" rel="noopener noreferrer">ObjectBox example project<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>:</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;_note1&quot;</span><span class="token operator">:</span> <span class="token string">&quot;KEEP THIS FILE! Check it into a version control system (VCS) like git.&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_note2&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ObjectBox manages crucial IDs for your object model. See docs for details.&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_note3&quot;</span><span class="token operator">:</span> <span class="token string">&quot;If you have VCS merge conflicts, you must resolve them according to ObjectBox docs.&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;entities&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1:6645479796472661392&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;lastPropertyId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;4:1260602348787983453&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Note&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;properties&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1:9211738071025439652&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;id&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2:8804670454579230281&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;text&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;3:6707341922395832766&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;comment&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;4:1260602348787983453&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;date&quot;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;lastEntityId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1:6645479796472661392&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;lastIndexId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0:0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;lastSequenceId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0:0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;modelVersion&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
  <span class="token property">&quot;retiredEntityUids&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;retiredIndexUids&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;retiredPropertyUids&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token number">1</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br></div></div><p>As you can see, the “id” attributes combine the ID and UID using a colon. This protects against faulty merges. When applying the meta model to the database, ObjectBox will check for consistent IDs and UIDs.</p> <h2 id="meta-model-synchronization"><a href="#meta-model-synchronization" class="header-anchor">#</a> Meta Model Synchronization</h2> <p>At build time, ObjectBox gathers meta model information from the entities (@Entity classes) and the JSON file. The complete meta model information is written into the generated class <code>MyObjectBox</code>.</p> <p>Then, at runtime, the meta model assembled in MyObjectBox is synchronized with the meta model inside the ObjectBox database (file). UIDs are the primary keys to synchronize the meta model with the database. The synchronization involves a couple of consistency checks that may fail when you try to apply illegal meta data.</p> <h2 id="stable-renames-using-uids"><a href="#stable-renames-using-uids" class="header-anchor">#</a> Stable Renames using UIDs</h2> <p>At some point you may want to rename an entity class or just a property. Without further information, ObjectBox will remove the old entity/property and add a new one with the new name. This is actually a valid scenario by itself: removing one property and adding another. To tell ObjectBox it should do a rename instead, you need to supply the property's previous UID.</p> <p>Add an <code>@Uid</code> annotation without any value to the entity or property you want to rename and trigger a project build. The build will fail with a message containing the UID you need to apply to the <code>@Uid</code> annotation.</p> <p>Also check out this <a href="https://docs.objectbox.io/advanced/data-model-updates" target="_blank" rel="noopener noreferrer">how-to guide<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> for hands-on information on renaming and resetting.</p> <h2 id="resolving-meta-model-conflicts"><a href="#resolving-meta-model-conflicts" class="header-anchor">#</a> Resolving Meta Model Conflicts</h2> <p>In the section on UIDs, we already hinted at the possibility of meta model conflicts. This is caused by developers changing the meta model concurrently, typically by adding entities or properties. The knowledge acquired in the previous paragraphs helps us to resolve the conflicts.</p> <h3 id="the-nuke-option"><a href="#the-nuke-option" class="header-anchor">#</a> The Nuke Option</h3> <p>During initial development, it may be an option to just delete the meta model and all databases. This will cause a fresh start for the meta model, e.g. all UIDs will be regenerated. Follow these steps:</p> <ul><li>Delete the JSON file (objectbox-models/default.json)</li> <li>Build the project to generate a new JSON file from scratch</li> <li>Commit the recreated JSON file to your VCS (e.g. git)</li> <li>Delete all previously created ObjectBox databases (e.g. for Android, delete the app’s data or uninstall the app)</li></ul> <p>While this is a simple approach, it has its obvious disadvantages and is completely useless once an app has been published.</p> <p>Pitfall: If the database file does not seem to get deleted, check for the presence of <code>android:allowBackup=&quot;true&quot;</code>  in your Android manifest. Backups may resurrect old files and thus should be off for this approach.</p> <h3 id="manual-conflict-resolution"><a href="#manual-conflict-resolution" class="header-anchor">#</a> Manual conflict resolution</h3> <p>Usually, it is preferred to edit the JSON file to resolve conflicts and fix the meta model. This involves the following steps:</p> <ul><li><strong>Ensure IDs are unique:</strong> in the JSON file the id attribute has values in the format “ID:UID”. If you have duplicate IDs after a VCS merge, you should assign a new ID (keep the UID part!) to one of the two. Typically, the new ID would be “last used ID + 1”.</li> <li><strong>Update last ID values:</strong> for entities, update the attribute “lastEntityId”; for properties, update the attribute “lastPropertyId” of the enclosing entity</li> <li><strong>Check for other ID references:</strong> do a text search for the UID and check if the ID part is correct for all UID occurrences</li></ul> <p>To illustrate this with an example, let's assume the last assigned entity ID was 41. Thus the next entity ID will be 42. Now, the developers Alice and Bob add a new entity without knowing of each other. Alice adds a new entity “Ant” which is assigned the entity ID 42. At the same time, Bob adds the entity “Bear” which is also assigned the ID 42. After both developers committed their code, the ID 42 does not unique identify an entity type (“Ant” or “Bear”?). Furthermore, in Alice’s ObjectBox the entity ID 42 is already wired to “Ant” while Bob’s ObjectBox maps 42 to “Bear”. UIDs make this situation resolvable. Let’s say the UID is 12345 for “Ant” and 9876 for “Bear”. Now, when Bob pulls Alice’s changes, he is able to resolve the conflict. He manually assigns the entity ID 43 to “Bear” and updates the lastEntityId attribute accordingly to “43:9876” (ID:UID). After Bob commits his changes, both developers are able to continue with their ObjectBox files.</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/third-party/objectbox/advanced/data-model-updates.html" class="prev">
        Data Model Updates
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.708bd31f.js" defer></script><script src="/assets/js/2.1637da50.js" defer></script><script src="/assets/js/87.6942ff22.js" defer></script>
  </body>
</html>
