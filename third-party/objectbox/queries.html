<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ObjectBox Queries | 文档管理中心</title>
    <meta name="generator" content="VuePress 1.8.0">
    
    <meta name="description" content="瑞修得移动开发小组文档管理中心">
    
    <link rel="preload" href="/docs/assets/css/0.styles.901409fb.css" as="style"><link rel="preload" href="/docs/assets/js/app.1dda1ef8.js" as="script"><link rel="preload" href="/docs/assets/js/2.1637da50.js" as="script"><link rel="preload" href="/docs/assets/js/91.6f03a350.js" as="script"><link rel="prefetch" href="/docs/assets/js/10.58dfe90f.js"><link rel="prefetch" href="/docs/assets/js/100.5c67fc3e.js"><link rel="prefetch" href="/docs/assets/js/101.3e719c16.js"><link rel="prefetch" href="/docs/assets/js/102.98816141.js"><link rel="prefetch" href="/docs/assets/js/103.0a5c3a01.js"><link rel="prefetch" href="/docs/assets/js/104.a55d0f0c.js"><link rel="prefetch" href="/docs/assets/js/105.59340145.js"><link rel="prefetch" href="/docs/assets/js/106.b8154cda.js"><link rel="prefetch" href="/docs/assets/js/107.22f6f4f3.js"><link rel="prefetch" href="/docs/assets/js/108.ac08dac5.js"><link rel="prefetch" href="/docs/assets/js/109.261bb23c.js"><link rel="prefetch" href="/docs/assets/js/11.be546261.js"><link rel="prefetch" href="/docs/assets/js/110.40e9908d.js"><link rel="prefetch" href="/docs/assets/js/111.d0bf2613.js"><link rel="prefetch" href="/docs/assets/js/112.acf2ec43.js"><link rel="prefetch" href="/docs/assets/js/113.adea7e7c.js"><link rel="prefetch" href="/docs/assets/js/114.4215f03c.js"><link rel="prefetch" href="/docs/assets/js/115.664f3b94.js"><link rel="prefetch" href="/docs/assets/js/116.721268c9.js"><link rel="prefetch" href="/docs/assets/js/117.592435d2.js"><link rel="prefetch" href="/docs/assets/js/118.fea53932.js"><link rel="prefetch" href="/docs/assets/js/119.720b40e9.js"><link rel="prefetch" href="/docs/assets/js/12.a3a13835.js"><link rel="prefetch" href="/docs/assets/js/120.0816f4ee.js"><link rel="prefetch" href="/docs/assets/js/121.5e9d7e69.js"><link rel="prefetch" href="/docs/assets/js/122.b6a3fdf0.js"><link rel="prefetch" href="/docs/assets/js/123.58800fd8.js"><link rel="prefetch" href="/docs/assets/js/124.7764b45f.js"><link rel="prefetch" href="/docs/assets/js/125.bf736276.js"><link rel="prefetch" href="/docs/assets/js/126.096778ee.js"><link rel="prefetch" href="/docs/assets/js/127.7f3b491a.js"><link rel="prefetch" href="/docs/assets/js/128.2c976ed6.js"><link rel="prefetch" href="/docs/assets/js/129.1558b942.js"><link rel="prefetch" href="/docs/assets/js/13.d66ff325.js"><link rel="prefetch" href="/docs/assets/js/130.521d4737.js"><link rel="prefetch" href="/docs/assets/js/131.28349f1c.js"><link rel="prefetch" href="/docs/assets/js/132.18530a22.js"><link rel="prefetch" href="/docs/assets/js/133.46e03b94.js"><link rel="prefetch" href="/docs/assets/js/134.e8ad93d1.js"><link rel="prefetch" href="/docs/assets/js/135.776ec045.js"><link rel="prefetch" href="/docs/assets/js/136.d546aafe.js"><link rel="prefetch" href="/docs/assets/js/137.93461a95.js"><link rel="prefetch" href="/docs/assets/js/138.2f9a75db.js"><link rel="prefetch" href="/docs/assets/js/139.bb135f58.js"><link rel="prefetch" href="/docs/assets/js/14.586917b9.js"><link rel="prefetch" href="/docs/assets/js/140.6097bf59.js"><link rel="prefetch" href="/docs/assets/js/141.6a6d651b.js"><link rel="prefetch" href="/docs/assets/js/142.d26aa58e.js"><link rel="prefetch" href="/docs/assets/js/143.23821827.js"><link rel="prefetch" href="/docs/assets/js/144.3a4c36b1.js"><link rel="prefetch" href="/docs/assets/js/145.2824b080.js"><link rel="prefetch" href="/docs/assets/js/146.b1e8893f.js"><link rel="prefetch" href="/docs/assets/js/147.d54b971f.js"><link rel="prefetch" href="/docs/assets/js/148.369df7cc.js"><link rel="prefetch" href="/docs/assets/js/149.1bf135cd.js"><link rel="prefetch" href="/docs/assets/js/15.719b9ed4.js"><link rel="prefetch" href="/docs/assets/js/16.801ae469.js"><link rel="prefetch" href="/docs/assets/js/17.caf90ccc.js"><link rel="prefetch" href="/docs/assets/js/18.9b1430b4.js"><link rel="prefetch" href="/docs/assets/js/19.a7ce47c6.js"><link rel="prefetch" href="/docs/assets/js/20.c6f145a7.js"><link rel="prefetch" href="/docs/assets/js/21.96ad3811.js"><link rel="prefetch" href="/docs/assets/js/22.8b467667.js"><link rel="prefetch" href="/docs/assets/js/23.12614503.js"><link rel="prefetch" href="/docs/assets/js/24.9fd2bb95.js"><link rel="prefetch" href="/docs/assets/js/25.1666b1f6.js"><link rel="prefetch" href="/docs/assets/js/26.59796892.js"><link rel="prefetch" href="/docs/assets/js/27.99afdda0.js"><link rel="prefetch" href="/docs/assets/js/28.b4d6b486.js"><link rel="prefetch" href="/docs/assets/js/29.afbc8554.js"><link rel="prefetch" href="/docs/assets/js/3.3c077cdd.js"><link rel="prefetch" href="/docs/assets/js/30.707e9271.js"><link rel="prefetch" href="/docs/assets/js/31.1f01bd11.js"><link rel="prefetch" href="/docs/assets/js/32.58b8cdf9.js"><link rel="prefetch" href="/docs/assets/js/33.5e6d8fb9.js"><link rel="prefetch" href="/docs/assets/js/34.7a9c9f16.js"><link rel="prefetch" href="/docs/assets/js/35.314a3788.js"><link rel="prefetch" href="/docs/assets/js/36.54191cc3.js"><link rel="prefetch" href="/docs/assets/js/37.44382138.js"><link rel="prefetch" href="/docs/assets/js/38.5380da44.js"><link rel="prefetch" href="/docs/assets/js/39.34ebb7c0.js"><link rel="prefetch" href="/docs/assets/js/4.b333c14c.js"><link rel="prefetch" href="/docs/assets/js/40.0453b798.js"><link rel="prefetch" href="/docs/assets/js/41.36d65bc4.js"><link rel="prefetch" href="/docs/assets/js/42.04cba918.js"><link rel="prefetch" href="/docs/assets/js/43.ee454731.js"><link rel="prefetch" href="/docs/assets/js/44.256c268b.js"><link rel="prefetch" href="/docs/assets/js/45.7a79bfa1.js"><link rel="prefetch" href="/docs/assets/js/46.71832f87.js"><link rel="prefetch" href="/docs/assets/js/47.102136b0.js"><link rel="prefetch" href="/docs/assets/js/48.1b555eed.js"><link rel="prefetch" href="/docs/assets/js/49.2dad9744.js"><link rel="prefetch" href="/docs/assets/js/5.80d7978e.js"><link rel="prefetch" href="/docs/assets/js/50.2bffebce.js"><link rel="prefetch" href="/docs/assets/js/51.67de7f5b.js"><link rel="prefetch" href="/docs/assets/js/52.1fb2cbfa.js"><link rel="prefetch" href="/docs/assets/js/53.86f280a5.js"><link rel="prefetch" href="/docs/assets/js/54.ba5fd39f.js"><link rel="prefetch" href="/docs/assets/js/55.fbf0c266.js"><link rel="prefetch" href="/docs/assets/js/56.78f10d2c.js"><link rel="prefetch" href="/docs/assets/js/57.5a2a2006.js"><link rel="prefetch" href="/docs/assets/js/58.19058959.js"><link rel="prefetch" href="/docs/assets/js/59.7c1efd15.js"><link rel="prefetch" href="/docs/assets/js/6.93c23e29.js"><link rel="prefetch" href="/docs/assets/js/60.500e14b5.js"><link rel="prefetch" href="/docs/assets/js/61.ba85c18e.js"><link rel="prefetch" href="/docs/assets/js/62.6a199316.js"><link rel="prefetch" href="/docs/assets/js/63.e778bbfe.js"><link rel="prefetch" href="/docs/assets/js/64.c69ba645.js"><link rel="prefetch" href="/docs/assets/js/65.66afc7d5.js"><link rel="prefetch" href="/docs/assets/js/66.c60f23f3.js"><link rel="prefetch" href="/docs/assets/js/67.35ea2d93.js"><link rel="prefetch" href="/docs/assets/js/68.6f128c5c.js"><link rel="prefetch" href="/docs/assets/js/69.e8601092.js"><link rel="prefetch" href="/docs/assets/js/7.e0defabf.js"><link rel="prefetch" href="/docs/assets/js/70.e15c66b9.js"><link rel="prefetch" href="/docs/assets/js/71.65a385e6.js"><link rel="prefetch" href="/docs/assets/js/72.fddf5dc9.js"><link rel="prefetch" href="/docs/assets/js/73.b55e21d6.js"><link rel="prefetch" href="/docs/assets/js/74.78f2bb84.js"><link rel="prefetch" href="/docs/assets/js/75.3291174d.js"><link rel="prefetch" href="/docs/assets/js/76.ca315e89.js"><link rel="prefetch" href="/docs/assets/js/77.8f31a3ff.js"><link rel="prefetch" href="/docs/assets/js/78.4df66be0.js"><link rel="prefetch" href="/docs/assets/js/79.7b82ad6e.js"><link rel="prefetch" href="/docs/assets/js/8.d96ec7b2.js"><link rel="prefetch" href="/docs/assets/js/80.4aa5f85b.js"><link rel="prefetch" href="/docs/assets/js/81.ee0c5d7a.js"><link rel="prefetch" href="/docs/assets/js/82.f5d076b2.js"><link rel="prefetch" href="/docs/assets/js/83.b7d9c0c6.js"><link rel="prefetch" href="/docs/assets/js/84.c8b235a0.js"><link rel="prefetch" href="/docs/assets/js/85.a2f95b9e.js"><link rel="prefetch" href="/docs/assets/js/86.dd6142ae.js"><link rel="prefetch" href="/docs/assets/js/87.d068751e.js"><link rel="prefetch" href="/docs/assets/js/88.18f2cebe.js"><link rel="prefetch" href="/docs/assets/js/89.cdb95e7d.js"><link rel="prefetch" href="/docs/assets/js/9.2bf6fce9.js"><link rel="prefetch" href="/docs/assets/js/90.c40ac454.js"><link rel="prefetch" href="/docs/assets/js/92.183da242.js"><link rel="prefetch" href="/docs/assets/js/93.4abdb53c.js"><link rel="prefetch" href="/docs/assets/js/94.96d80901.js"><link rel="prefetch" href="/docs/assets/js/95.08358998.js"><link rel="prefetch" href="/docs/assets/js/96.61287424.js"><link rel="prefetch" href="/docs/assets/js/97.a0c32235.js"><link rel="prefetch" href="/docs/assets/js/98.ee4911f9.js"><link rel="prefetch" href="/docs/assets/js/99.fae638a9.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.901409fb.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/" class="home-link router-link-active"><!----> <span class="site-name">文档管理中心</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/docs/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Third Party" class="dropdown-title"><span class="title">Third Party</span> <span class="arrow down"></span></button> <button type="button" aria-label="Third Party" class="mobile-dropdown-title"><span class="title">Third Party</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/third-party/arouter/" class="nav-link">
  ARouter
</a></li><li class="dropdown-item"><!----> <a href="/docs/third-party/bugly/" class="nav-link">
  Bugly
</a></li><li class="dropdown-item"><!----> <a href="/docs/third-party/dokka/" class="nav-link">
  Dokka
</a></li><li class="dropdown-item"><!----> <a href="/docs/third-party/greendao/" class="nav-link">
  greenDAO
</a></li><li class="dropdown-item"><!----> <a href="/docs/third-party/koin/" class="nav-link">
  Koin
</a></li><li class="dropdown-item"><!----> <a href="/docs/third-party/mars/" class="nav-link">
  Mars
</a></li><li class="dropdown-item"><!----> <a href="/docs/third-party/mmkv/" class="nav-link">
  MMKV
</a></li><li class="dropdown-item"><!----> <a href="/docs/third-party/mtj/" class="nav-link">
  百度移动统计
</a></li><li class="dropdown-item"><!----> <a href="/docs/third-party/objectbox/" class="nav-link router-link-active">
  Objectbox
</a></li><li class="dropdown-item"><!----> <a href="/docs/third-party/okhttp/" class="nav-link">
  OkHttp
</a></li><li class="dropdown-item"><!----> <a href="/docs/third-party/orhanobut-logger/" class="nav-link">
  Orhanobut Logger
</a></li><li class="dropdown-item"><!----> <a href="/docs/third-party/retrofit/" class="nav-link">
  Retrofit
</a></li><li class="dropdown-item"><!----> <a href="/docs/third-party/rxjava/" class="nav-link">
  Rxjava
</a></li><li class="dropdown-item"><!----> <a href="/docs/third-party/sentry/" class="nav-link">
  Sentry
</a></li><li class="dropdown-item"><!----> <a href="/docs/third-party/umeng/" class="nav-link">
  友盟+
</a></li></ul></div></div><div class="nav-item"><a href="https://ruixiude.github.io/apidocs/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  在线API文档
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/docs/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Third Party" class="dropdown-title"><span class="title">Third Party</span> <span class="arrow down"></span></button> <button type="button" aria-label="Third Party" class="mobile-dropdown-title"><span class="title">Third Party</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/third-party/arouter/" class="nav-link">
  ARouter
</a></li><li class="dropdown-item"><!----> <a href="/docs/third-party/bugly/" class="nav-link">
  Bugly
</a></li><li class="dropdown-item"><!----> <a href="/docs/third-party/dokka/" class="nav-link">
  Dokka
</a></li><li class="dropdown-item"><!----> <a href="/docs/third-party/greendao/" class="nav-link">
  greenDAO
</a></li><li class="dropdown-item"><!----> <a href="/docs/third-party/koin/" class="nav-link">
  Koin
</a></li><li class="dropdown-item"><!----> <a href="/docs/third-party/mars/" class="nav-link">
  Mars
</a></li><li class="dropdown-item"><!----> <a href="/docs/third-party/mmkv/" class="nav-link">
  MMKV
</a></li><li class="dropdown-item"><!----> <a href="/docs/third-party/mtj/" class="nav-link">
  百度移动统计
</a></li><li class="dropdown-item"><!----> <a href="/docs/third-party/objectbox/" class="nav-link router-link-active">
  Objectbox
</a></li><li class="dropdown-item"><!----> <a href="/docs/third-party/okhttp/" class="nav-link">
  OkHttp
</a></li><li class="dropdown-item"><!----> <a href="/docs/third-party/orhanobut-logger/" class="nav-link">
  Orhanobut Logger
</a></li><li class="dropdown-item"><!----> <a href="/docs/third-party/retrofit/" class="nav-link">
  Retrofit
</a></li><li class="dropdown-item"><!----> <a href="/docs/third-party/rxjava/" class="nav-link">
  Rxjava
</a></li><li class="dropdown-item"><!----> <a href="/docs/third-party/sentry/" class="nav-link">
  Sentry
</a></li><li class="dropdown-item"><!----> <a href="/docs/third-party/umeng/" class="nav-link">
  友盟+
</a></li></ul></div></div><div class="nav-item"><a href="https://ruixiude.github.io/apidocs/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  在线API文档
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/docs/third-party/objectbox/" aria-current="page" class="sidebar-link">ObjectBox Java (Kotlin, Android)</a></li><li><a href="/docs/third-party/objectbox/getting-started.html" class="sidebar-link">Getting started</a></li><li><a href="/docs/third-party/objectbox/tutoial-demo-project.html" class="sidebar-link">Tutorial: Demo Project</a></li><li><a href="/docs/third-party/objectbox/entity-annotations.html" class="sidebar-link">Entity Annotations</a></li><li><a href="/docs/third-party/objectbox/kotlin-support.html" class="sidebar-link">Kotlin Support</a></li><li><a href="/docs/third-party/objectbox/queries.html" aria-current="page" class="active sidebar-link">ObjectBox Queries</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/third-party/objectbox/queries.html#querybuilder" class="sidebar-link">QueryBuilder</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/third-party/objectbox/queries.html#new-query-api" class="sidebar-link">New Query API</a></li><li class="sidebar-sub-header"><a href="/docs/third-party/objectbox/queries.html#notable-conditions" class="sidebar-link">Notable conditions</a></li><li class="sidebar-sub-header"><a href="/docs/third-party/objectbox/queries.html#ordering-results" class="sidebar-link">Ordering results</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/third-party/objectbox/queries.html#query" class="sidebar-link">Query</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/third-party/objectbox/queries.html#finding-objects" class="sidebar-link">Finding objects</a></li><li class="sidebar-sub-header"><a href="/docs/third-party/objectbox/queries.html#reusing-queries-and-parameters" class="sidebar-link">Reusing Queries and Parameters</a></li><li class="sidebar-sub-header"><a href="/docs/third-party/objectbox/queries.html#limit-offset-and-pagination" class="sidebar-link">Limit, Offset, and Pagination</a></li><li class="sidebar-sub-header"><a href="/docs/third-party/objectbox/queries.html#lazy-loading-results" class="sidebar-link">Lazy loading results</a></li><li class="sidebar-sub-header"><a href="/docs/third-party/objectbox/queries.html#removing-objects" class="sidebar-link">Removing Objects</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/third-party/objectbox/queries.html#propertyquery" class="sidebar-link">PropertyQuery</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/third-party/objectbox/queries.html#handling-null-values" class="sidebar-link">Handling null values</a></li><li class="sidebar-sub-header"><a href="/docs/third-party/objectbox/queries.html#distinct-and-unique-results" class="sidebar-link">Distinct and unique results</a></li><li class="sidebar-sub-header"><a href="/docs/third-party/objectbox/queries.html#aggregating-values" class="sidebar-link">Aggregating values</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/third-party/objectbox/queries.html#add-query-conditions-for-related-entities-links" class="sidebar-link">Add query conditions for related entities (links)</a></li><li class="sidebar-sub-header"><a href="/docs/third-party/objectbox/queries.html#eager-loading-of-relations" class="sidebar-link">Eager Loading of Relations</a></li><li class="sidebar-sub-header"><a href="/docs/third-party/objectbox/queries.html#query-filters" class="sidebar-link">Query filters</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/third-party/objectbox/queries.html#query-filters-and-tomany-relation" class="sidebar-link">Query filters and ToMany relation</a></li></ul></li></ul></li><li><a href="/docs/third-party/objectbox/data-observers-and-rx.html" class="sidebar-link">Data Observers &amp; Rx</a></li><li><a href="/docs/third-party/objectbox/relations.html" class="sidebar-link">Relations</a></li><li><a href="/docs/third-party/objectbox/data-browser.html" class="sidebar-link">Data Browser</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Android</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Advanced</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="objectbox-queries"><a href="#objectbox-queries" class="header-anchor">#</a> ObjectBox Queries</h1> <p>ObjectBox queries return persisted objects that match user defined criteria. Learn here how to use the QueryBuilder class and specify criteria to create Queries with ObjectBox DB in Java.</p> <p>With ObjectBox DB you use the QueryBuilder class to specify criteria and create Query objects. The Query class will actually run the query and return matching objects.</p> <h2 id="querybuilder"><a href="#querybuilder" class="header-anchor">#</a> QueryBuilder</h2> <p>The <a href="http://objectbox.io/files/objectbox-java/current/io/objectbox/query/QueryBuilder.html" target="_blank" rel="noopener noreferrer"><code>QueryBuilder</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> class lets you build custom queries for your entities. Create an instance via <code>Box.query()</code> .</p> <p><code>QueryBuilder</code> offers several methods to define query conditions for properties of an entity. To specify a property ObjectBox does not use Strings but meta information &quot;underscore&quot; classes (like <code>User_</code>) that are generated during build time. The meta information classes have a static field for each property (like <code>User_.firstName</code>). This allows to reference properties safely with compile time checks to prevent runtime errors, for example because of typos.</p> <p>Here are two examples using a simple and a more complicated query:</p> <p><strong>Simple condition example</strong>: Query for all users with the first name “Joe”:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> joes <span class="token operator">=</span> userBox<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token class-name">User_</span><span class="token punctuation">.</span>firstName<span class="token punctuation">,</span> <span class="token string">&quot;Joe&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>Multiple conditions example:</strong> Get users with the first name “Joe” that are born later than 1970 and whose last name starts with “O”.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">QueryBuilder</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> builder <span class="token operator">=</span> userBox<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
builder<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token class-name">User_</span><span class="token punctuation">.</span>firstName<span class="token punctuation">,</span> <span class="token string">&quot;Joe&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">greater</span><span class="token punctuation">(</span><span class="token class-name">User_</span><span class="token punctuation">.</span>yearOfBirth<span class="token punctuation">,</span> <span class="token number">1970</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token class-name">User_</span><span class="token punctuation">.</span>lastName<span class="token punctuation">,</span> <span class="token string">&quot;O&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> youngJoes <span class="token operator">=</span> builder<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="new-query-api"><a href="#new-query-api" class="header-anchor">#</a> New Query API</h3> <blockquote><p>The new Query API is in preview. Share your <a href="https://github.com/objectbox/objectbox-java/issues/201" target="_blank" rel="noopener noreferrer">feedback in the GitHub issue<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p></blockquote> <p>ObjectBox <code>3.0.0-alpha1+</code> introduces a new query API that accepts complex nested conditions, e.g. the equivalent of <code>(A or B) and (C or D)</code>.</p> <p>To build a query with the new API use <code>Box.query(condition)</code> and supply a <code>condition</code> built using entity <code>Property</code> methods, like <code>property.equal(value)</code>. All properties of an entity can be accessed using its underscore class. For example, for an entity <code>User</code> a <code>property</code> could be <code>User_.firstName</code>, a <code>condition</code> using it could be <code>User_.firstName.equal(&quot;Joe&quot;)</code>.</p> <p><strong>Simple condition example</strong>: Query for all users with the first name “Joe”.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> joes <span class="token operator">=</span> userBox<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token class-name">User_</span><span class="token punctuation">.</span>firstName<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token string">&quot;Joe&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>Multiple conditions example:</strong> Get users with the first name “Joe” that are born later than 1970 and whose last name starts with “O”.</p> <div class="tabs-component"><ul role="tablist" class="tabs-component-tabs"></ul> <div class="tabs-component-panels"><section aria-hidden="true" id="java" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> youngJoes <span class="token operator">=</span> userBox<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>
        <span class="token class-name">User_</span><span class="token punctuation">.</span>firstName<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token string">&quot;Joe&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span><span class="token class-name">User_</span><span class="token punctuation">.</span>yearOfBirth<span class="token punctuation">.</span><span class="token function">greater</span><span class="token punctuation">(</span><span class="token number">1970</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span><span class="token class-name">User_</span><span class="token punctuation">.</span>lastName<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">&quot;O&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></section> <section aria-hidden="true" id="kotlin" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">val</span> youngJoes <span class="token operator">=</span> userBox<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>
        User_<span class="token punctuation">.</span>firstName equal <span class="token string">&quot;Joe&quot;</span>
                <span class="token function">and</span> <span class="token punctuation">(</span>User_<span class="token punctuation">.</span>yearOfBirth greater <span class="token number">1970</span><span class="token punctuation">)</span>
                <span class="token function">and</span> <span class="token punctuation">(</span>User_<span class="token punctuation">.</span>lastName startsWith <span class="token string">&quot;O&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></section></div></div> <p>Conditions are combined with <code>QueryCondition.and(condition)</code> or <code>QueryCondition.or(condition)</code>. This implicitly adds parentheses around the combined conditions, e.g. <code>cond1.and(cond2)</code> is logically equivalent to <code>(cond1 AND cond2)</code>.</p> <p>To nest conditions pass a single or combined <code>condition</code>.</p> <div class="tabs-component"><ul role="tablist" class="tabs-component-tabs"></ul> <div class="tabs-component-panels"><section aria-hidden="true" id="java" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// equal AND (less OR oneOf)</span>
<span class="token class-name">Query</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> query <span class="token operator">=</span> box<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>
        <span class="token class-name">User_</span><span class="token punctuation">.</span>firstName<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token string">&quot;Joe&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span><span class="token class-name">User_</span><span class="token punctuation">.</span>age<span class="token punctuation">.</span><span class="token function">less</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">or</span><span class="token punctuation">(</span><span class="token class-name">User_</span><span class="token punctuation">.</span>stamp<span class="token punctuation">.</span><span class="token function">oneOf</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token keyword">long</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token number">1012</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">order</span><span class="token punctuation">(</span><span class="token class-name">User_</span><span class="token punctuation">.</span>age<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></section> <section aria-hidden="true" id="kotlin" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token comment">// equal AND (less OR oneOf)</span>
<span class="token keyword">val</span> query <span class="token operator">=</span> box<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>
        User_<span class="token punctuation">.</span>firstName equal <span class="token string">&quot;Joe&quot;</span>
                <span class="token function">and</span> <span class="token punctuation">(</span>User_<span class="token punctuation">.</span>age less <span class="token number">12</span>
                <span class="token function">or</span> <span class="token punctuation">(</span>User_<span class="token punctuation">.</span>stamp oneOf <span class="token function">longArrayOf</span><span class="token punctuation">(</span><span class="token number">1012</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">order</span><span class="token punctuation">(</span>User_<span class="token punctuation">.</span>age<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></section></div></div> <h4 id="other-notable-changes"><a href="#other-notable-changes" class="header-anchor">#</a> Other notable changes</h4> <ul><li><code>property.oneOf(array)</code> replaces the <code>in(property, array)</code> (<code>inValues(property, array)</code> for Kotlin) condition.</li> <li>Use Kotlin infix functions to write <code>condition and condition</code> and <code>condition or condition</code>.</li> <li>Use <code>condition.alias(aliasName)</code> to set an alias for a <code>condition</code> that can later be used with the <code>Query</code> setParameter methods.</li></ul> <h3 id="notable-conditions"><a href="#notable-conditions" class="header-anchor">#</a> Notable conditions</h3> <p>In addition to expected conditions like <code>equal()</code>, <code>notEqual()</code>, <code>greater()</code> and <code>less()</code> there are also conditions like:</p> <ul><li><code>isNull()</code> and <code>notNull()</code>,</li> <li><code>between()</code> to filter for values that are between the given two,</li> <li><code>in()</code> and <code>notIn()</code> to filter for values that match any in the given array,</li> <li><code>startsWith()</code>, <code>endsWith()</code> and <code>contains()</code> for extended String filtering.</li></ul> <p>In addition, there is <code>and()</code> and <code>or()</code> to build more complex combinations of conditions.</p> <p>For an overview of all available criteria, please refer to the <a href="http://objectbox.io/files/objectbox-java/current/io/objectbox/query/QueryBuilder.html" target="_blank" rel="noopener noreferrer">QueryBuilder<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> class and its method documentations.</p> <h3 id="ordering-results"><a href="#ordering-results" class="header-anchor">#</a> Ordering results</h3> <p>In addition to specifying conditions you can order the returned results using the <code>order()</code> method:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>userBox<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token class-name">User_</span><span class="token punctuation">.</span>firstName<span class="token punctuation">,</span> <span class="token string">&quot;Joe&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">order</span><span class="token punctuation">(</span><span class="token class-name">User_</span><span class="token punctuation">.</span>lastName<span class="token punctuation">)</span> <span class="token comment">// in ascending order, ignoring case</span>
    <span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>You can also pass flags to <code>order()</code> to sort in descending order, to sort case sensitive or to specially treat null values. For example to sort the above results in descending order and case sensitive instead:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>userBox<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token class-name">User_</span><span class="token punctuation">.</span>firstName<span class="token punctuation">,</span> <span class="token string">&quot;Joe&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">order</span><span class="token punctuation">(</span><span class="token class-name">User_</span><span class="token punctuation">.</span>lastName<span class="token punctuation">,</span> <span class="token class-name">QueryBuilder</span><span class="token punctuation">.</span>DESCENDING <span class="token operator">|</span> <span class="token class-name">QueryBuilder</span><span class="token punctuation">.</span>CASE_SENSITIVE<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Order conditions can also be chained. Check the <a href="http://objectbox.io/files/objectbox-java/current/io/objectbox/query/QueryBuilder.html#order-io.objectbox.Property-int-" target="_blank" rel="noopener noreferrer">method documentation<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> for details.</p> <h2 id="query"><a href="#query" class="header-anchor">#</a> Query</h2> <p><a href="https://docs.objectbox.io/queries" target="_blank" rel="noopener noreferrer">Queries<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> are created (and not yet executed) by calling <code>build()</code> on the <code>QueryBuilder</code>.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Query</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> query <span class="token operator">=</span> builder<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="finding-objects"><a href="#finding-objects" class="header-anchor">#</a> Finding objects</h3> <p>There are a couple of find methods to retrieve objects matching the query:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// return all entities matching the query</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> joes <span class="token operator">=</span> query<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// return only the first result or null if none</span>
<span class="token class-name">User</span> joe <span class="token operator">=</span> query<span class="token punctuation">.</span><span class="token function">findFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// return the only result or null if none, throw if more than one result</span>
<span class="token class-name">User</span> joe <span class="token operator">=</span> query<span class="token punctuation">.</span><span class="token function">findUnique</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>To return all entities matching the query simply call <code>find()</code>.</p> <p>To only return the first result, use <code>findFirst()</code>.</p> <p>If you expect a unique result call <code>findUnique()</code> instead. It will give you a single result or null, if no matching entity was found and throw an exception if there was more than one result.</p> <h3 id="reusing-queries-and-parameters"><a href="#reusing-queries-and-parameters" class="header-anchor">#</a> Reusing Queries and Parameters</h3> <p>If you frequently run a <code>Query</code> you should cache the <code>Query</code> object and re-use it. To make a <code>Query</code> more reusable you can change the values, or query parameters, of each condition you added even after the <code>Query</code> is built. Let's see how.</p> <p>Assume we want to find a list of <code>User</code> with specific <code>firstName</code> values. First, we build a regular <code>Query</code> with an <code>equal()</code> condition for <code>firstName</code>. Because we have to pass an initial parameter value to <code>equal()</code> but plan to override it before running the <code>Query</code> later, we just pass an empty string:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// build query</span>
<span class="token class-name">Query</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> query <span class="token operator">=</span> userBox<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token class-name">User_</span><span class="token punctuation">.</span>firstName<span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Now at some later point we want to actually run the <code>Query</code>. To set a value for the <code>firstName</code> parameter we call <code>setParameter()</code> on the <code>Query</code> and pass the <code>firstName</code> property and the new parameter value:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// change firstName parameter to &quot;Joe&quot;, get results</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> joes <span class="token operator">=</span> query<span class="token punctuation">.</span><span class="token function">setParameter</span><span class="token punctuation">(</span><span class="token class-name">User_</span><span class="token punctuation">.</span>firstName<span class="token punctuation">,</span> <span class="token string">&quot;Joe&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token comment">// change firstName parameter to &quot;Jake&quot;, get results</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> jakes <span class="token operator">=</span> query<span class="token punctuation">.</span><span class="token function">setParameter</span><span class="token punctuation">(</span><span class="token class-name">User_</span><span class="token punctuation">.</span>firstName<span class="token punctuation">,</span> <span class="token string">&quot;Jake&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>So you might already be wondering, what happens if you have more than one condition using <code>firstName</code>? For this purpose you can <strong>assign each parameter an alias</strong> by calling <code>parameterAlias()</code> right after specifying the condition:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// assign alias &quot;name&quot; to the equal() query parameter</span>
<span class="token class-name">Query</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> query <span class="token operator">=</span> userBox<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token class-name">User_</span><span class="token punctuation">.</span>firstName<span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parameterAlias</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Then, when setting a new parameter value pass the alias instead of the property:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// change parameter with alias &quot;name&quot; to &quot;Joe&quot;, get results</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> joes <span class="token operator">=</span> query<span class="token punctuation">.</span><span class="token function">setParameter</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Joe&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="limit-offset-and-pagination"><a href="#limit-offset-and-pagination" class="header-anchor">#</a> Limit, Offset, and Pagination</h3> <p>Sometimes you only need a subset of a query, for example the first 10 elements to display in your user interface. This is especially helpful (and resourceful) when you have a high number of entities and you cannot limit the result using query conditions only. The built <code>Query&lt;T&gt;</code> has a <code>.find(long offset,long limit)</code>method with offset and limit arguments:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Query</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> query <span class="token operator">=</span> userBox<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token class-name">UserProperties<span class="token punctuation">.</span>FirstName</span><span class="token punctuation">,</span> <span class="token string">&quot;Joe&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> joes <span class="token operator">=</span> query<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token comment">/* offset by */</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token comment">/* limit to */</span> <span class="token number">5</span> <span class="token comment">/* results */</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><code>offset:</code> The first <code>offset</code> results are skipped.</p> <p><code>limit:</code> At most <code>limit</code> results of this query are returned.</p> <h3 id="lazy-loading-results"><a href="#lazy-loading-results" class="header-anchor">#</a> Lazy loading results</h3> <p>To avoid loading query results right away, Query offers <code>findLazy()</code> and <code>findLazyCached()</code> which return a <a href="http://objectbox.io/files/objectbox-java/current/io/objectbox/query/LazyList.html" target="_blank" rel="noopener noreferrer"><code>LazyList</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> of the query results.</p> <p><a href="http://objectbox.io/files/objectbox-java/current/io/objectbox/query/LazyList.html" target="_blank" rel="noopener noreferrer">LazyList<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> is a thread-safe, unmodifiable list that reads entities lazily only once they are accessed. Depending on the find method called, the lazy list will be cached or not. Cached lazy lists store the previously accessed objects to avoid loading entities more than once. Some features of the list are limited to cached lists (e.g. features that require the entire list). See the <a href="http://objectbox.io/files/objectbox-java/current/io/objectbox/query/LazyList.html" target="_blank" rel="noopener noreferrer">LazyList class documentation<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> for more details.</p> <h3 id="removing-objects"><a href="#removing-objects" class="header-anchor">#</a> Removing Objects</h3> <p>To remove all objects matching a query, call <code>query.remove()</code> .</p> <h2 id="propertyquery"><a href="#propertyquery" class="header-anchor">#</a> PropertyQuery</h2> <p>If you only want to return the values of a certain property and not a list of full objects you can use a <a href="http://objectbox.io/files/objectbox-java/current/io/objectbox/query/PropertyQuery.html" target="_blank" rel="noopener noreferrer">PropertyQuery<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. After building a query simply call <code>property(Property)</code>  to define the property followed by the appropriate find method.</p> <p>For example, instead of getting all <code>User</code>s, to just get their email addresses:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> emails <span class="token operator">=</span> userBox<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">property</span><span class="token punctuation">(</span><span class="token class-name">User_</span><span class="token punctuation">.</span>email<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">findStrings</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>In general there is always a find method to just return the value of the first result, like <code>findString()</code>, or the values of all results, like <code>findStrings()</code>.</p> <blockquote><p>Note: the returned array of property values is <strong>not in any particular order</strong>, even if you did specify an order when building the query.</p></blockquote> <h3 id="handling-null-values"><a href="#handling-null-values" class="header-anchor">#</a> Handling null values</h3> <p><strong>By default null values are not returned.</strong> However, you can specify a replacement value to return if a property is null:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// returns 'unknown' if email is null</span>
<span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> emails <span class="token operator">=</span> userBox<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">property</span><span class="token punctuation">(</span><span class="token class-name">User_</span><span class="token punctuation">.</span>email<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">nullValue</span><span class="token punctuation">(</span><span class="token string">&quot;unknown&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">findStrings</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="distinct-and-unique-results"><a href="#distinct-and-unique-results" class="header-anchor">#</a> Distinct and unique results</h3> <p>The property query can also only return distinct values:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// returns 'joe'</span>
<span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> names <span class="token operator">=</span> userBox<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">property</span><span class="token punctuation">(</span><span class="token class-name">User_</span><span class="token punctuation">.</span>firstName<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">distinct</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">findStrings</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>By default the case of strings is ignored.</strong> However, the distinct call can be overloaded to enable case sensitivity:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// returns 'Joe', 'joe', 'JOE'</span>
<span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> names <span class="token operator">=</span> userBox<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">property</span><span class="token punctuation">(</span><span class="token class-name">User_</span><span class="token punctuation">.</span>firstName<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">distinct</span><span class="token punctuation">(</span><span class="token class-name">StringOrder</span><span class="token punctuation">.</span>CASE_SENSITIVE<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">findStrings</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>If only a single value is expected to be returned the query can be configured to throw if that is not the case:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// throws if not exactly one name</span>
<span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> names <span class="token operator">=</span> userBox<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token class-name">User_</span><span class="token punctuation">.</span>isAdmin<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>  
    <span class="token punctuation">.</span><span class="token function">property</span><span class="token punctuation">(</span><span class="token class-name">User_</span><span class="token punctuation">.</span>firstName<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">unique</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">findStrings</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>The distinct and unique flags can be combined.</strong></p> <h3 id="aggregating-values"><a href="#aggregating-values" class="header-anchor">#</a> Aggregating values</h3> <p>Property queries (<a href="http://objectbox.io/files/objectbox-java/current/io/objectbox/query/PropertyQuery.html" target="_blank" rel="noopener noreferrer">JavaDoc<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>) also offer aggregate functions to directly calculate the minimum, maximum, average, sum and count of all found values:</p> <ul><li><code>min()</code> / <code>minDouble()</code>: Finds the minimum value for the given property over all objects matching the query.</li> <li><code>max()</code> / <code>maxDouble()</code>: Finds the maximum value.</li> <li><code>sum()</code> / <code>sumDouble()</code>: Calculates the sum of all values. <em>Note: the non-double version detects overflows and throws an exception in that case.</em></li> <li><code>avg()</code> : Calculates the average (always a double) of all values.</li> <li><code>count()</code>: returns the number of results. This is faster than finding and getting the length of the result array. Can be combined with <code>distinct()</code> to count only the number of distinct values. <em>Since 2.0.0.</em></li></ul> <h2 id="add-query-conditions-for-related-entities-links"><a href="#add-query-conditions-for-related-entities-links" class="header-anchor">#</a> Add query conditions for related entities (links)</h2> <blockquote><p>Since 2.0.0</p></blockquote> <p>After creating a relation between entities, you might want to add a query condition for a property that only exists in the related entity. In SQL this is solved using JOINs. But as ObjectBox is not a SQL database we built something very similar: links. Let's see how this works using an example.</p> <p>Assume there is a <code>Person</code> that can be associated with multiple <code>Address</code> entities:</p> <div class="tabs-component"><ul role="tablist" class="tabs-component-tabs"></ul> <div class="tabs-component-panels"><section aria-hidden="true" id="java" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Entity</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Id</span> <span class="token keyword">long</span> id<span class="token punctuation">;</span>
    <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token class-name">ToMany</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Address</span><span class="token punctuation">&gt;</span></span> addresses<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token annotation punctuation">@Entity</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Address</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Id</span> <span class="token keyword">long</span> id<span class="token punctuation">;</span>
    <span class="token class-name">String</span> street<span class="token punctuation">;</span>
    <span class="token class-name">String</span> zip<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div></section> <section aria-hidden="true" id="kotlin" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token annotation builtin">@Entity</span>
<span class="token keyword">class</span> Person <span class="token punctuation">{</span>
    <span class="token annotation builtin">@Id</span> <span class="token keyword">var</span> id<span class="token operator">:</span> Long <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token keyword">var</span> name<span class="token operator">:</span> String<span class="token operator">?</span> <span class="token operator">=</span> <span class="token keyword">null</span>
    <span class="token keyword">lateinit</span> <span class="token keyword">var</span> addresses<span class="token operator">:</span> ToMany<span class="token operator">&lt;</span>Address<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
<span class="token annotation builtin">@Entity</span>
<span class="token keyword">class</span> Address <span class="token punctuation">{</span>
    <span class="token annotation builtin">@Id</span> <span class="token keyword">var</span> id<span class="token operator">:</span> Long <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token keyword">var</span> street<span class="token operator">:</span> String<span class="token operator">?</span> <span class="token operator">=</span> <span class="token keyword">null</span>
    <span class="token keyword">var</span> zip<span class="token operator">:</span> String<span class="token operator">?</span> <span class="token operator">=</span> <span class="token keyword">null</span>
<span class="token punctuation">{</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div></section></div></div> <p>To get a <code>Person</code> with a certain name that also lives on a specific street, we need to query the associated <code>Address</code> entities of a <code>Person</code>. To do this, use the <a href="http://objectbox.io/files/objectbox-java/current/io/objectbox/query/QueryBuilder.html#link-io.objectbox.relation.RelationInfo-" target="_blank" rel="noopener noreferrer"><code>link(RelationInfo)</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> method of the query builder to tell that the <code>addresses</code> relation should be queried. Then add a condition for <code>Address</code>:</p> <div class="tabs-component"><ul role="tablist" class="tabs-component-tabs"></ul> <div class="tabs-component-panels"><section aria-hidden="true" id="java" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// get all Person objects named &quot;Elmo&quot;...</span>
<span class="token class-name">QueryBuilder</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Person</span><span class="token punctuation">&gt;</span></span> builder <span class="token operator">=</span> personBox
        <span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token class-name">Person_</span><span class="token punctuation">.</span>name<span class="token punctuation">,</span> <span class="token string">&quot;Elmo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ...which have an address on &quot;Sesame Street&quot;</span>
builder<span class="token punctuation">.</span><span class="token function">link</span><span class="token punctuation">(</span><span class="token class-name">Person_</span><span class="token punctuation">.</span>addresses<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token class-name">Address_</span><span class="token punctuation">.</span>street<span class="token punctuation">,</span> <span class="token string">&quot;Sesame Street&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Person</span><span class="token punctuation">&gt;</span></span> elmosOnSesameStreet <span class="token operator">=</span> builder<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
``
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></section> <section aria-hidden="true" id="kotlin" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token comment">// get all Person objects named &quot;Elmo&quot;...</span>
<span class="token keyword">val</span> builder <span class="token operator">=</span> personBox<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span>Person_<span class="token punctuation">.</span>name<span class="token punctuation">,</span> <span class="token string">&quot;Elmo&quot;</span><span class="token punctuation">)</span>
<span class="token comment">// ...which have an address on &quot;Sesame Street&quot;</span>
builder<span class="token punctuation">.</span><span class="token function">link</span><span class="token punctuation">(</span>Person_<span class="token punctuation">.</span>addresses<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span>Address_<span class="token punctuation">.</span>street<span class="token punctuation">,</span> <span class="token string">&quot;Sesame Street&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">val</span> elmosOnSesameStreet <span class="token operator">=</span> builder<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></section></div></div> <p>What if we want to get a list of <code>Address</code> instead of <code>Person</code>? If you know ObjectBox relations well, you would probably add a <code>@Backlink</code> relation to <code>Address</code> and build your query using it with <a href="http://objectbox.io/files/objectbox-java/current/io/objectbox/query/QueryBuilder.html#link-io.objectbox.relation.RelationInfo-" target="_blank" rel="noopener noreferrer"><code>link(RelationInfo)</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> as shown above:</p> <div class="tabs-component"><ul role="tablist" class="tabs-component-tabs"></ul> <div class="tabs-component-panels"><section aria-hidden="true" id="java" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Entity</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Address</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
    <span class="token annotation punctuation">@Backlink</span><span class="token punctuation">(</span><span class="token keyword">to</span> <span class="token operator">=</span> <span class="token string">&quot;addresses&quot;</span><span class="token punctuation">)</span>
    <span class="token class-name">ToMany</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Person</span><span class="token punctuation">&gt;</span></span> persons<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// get all Address objects with street &quot;Sesame Street&quot;...</span>
<span class="token class-name">QueryBuilder</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Address</span><span class="token punctuation">&gt;</span></span> builder <span class="token operator">=</span> addressBox
        <span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token class-name">Address_</span><span class="token punctuation">.</span>street<span class="token punctuation">,</span> <span class="token string">&quot;Sesame Street&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ...which are linked from a Person named &quot;Elmo&quot;</span>
builder<span class="token punctuation">.</span><span class="token function">link</span><span class="token punctuation">(</span><span class="token class-name">Address_</span><span class="token punctuation">.</span>persons<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token class-name">Person_</span><span class="token punctuation">.</span>name<span class="token punctuation">,</span> <span class="token string">&quot;Elmo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Address</span><span class="token punctuation">&gt;</span></span> sesameStreetsWithElmo <span class="token operator">=</span> builder<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div></section> <section aria-hidden="true" id="kotlin" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token annotation builtin">@Entity</span>
<span class="token keyword">class</span> Address <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
    <span class="token annotation builtin">@Backlink</span><span class="token punctuation">(</span><span class="token keyword">to</span> <span class="token operator">=</span> <span class="token string">&quot;addresses&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">lateinit</span> <span class="token keyword">var</span> persons<span class="token operator">:</span> ToMany<span class="token operator">&lt;</span>Person<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>

<span class="token comment">// get all Address objects with street &quot;Sesame Street&quot;...</span>
<span class="token keyword">val</span> builder <span class="token operator">=</span> addressBox<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span>Address_<span class="token punctuation">.</span>street<span class="token punctuation">,</span> <span class="token string">&quot;Sesame Street&quot;</span><span class="token punctuation">)</span>
<span class="token comment">// ...which are linked from a Person named &quot;Elmo&quot;</span>
builder<span class="token punctuation">.</span><span class="token function">link</span><span class="token punctuation">(</span>Address_<span class="token punctuation">.</span>persons<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span>Person_<span class="token punctuation">.</span>name<span class="token punctuation">,</span> <span class="token string">&quot;Elmo&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">val</span> sesameStreetsWithElmo <span class="token operator">=</span> builder<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div></section></div></div> <p>But actually you do not have to modify the <code>Address</code> entity (you still can if you need the <code>@Backlink</code> elsewhere). Instead we can use the <a href="http://objectbox.io/files/objectbox-java/current/io/objectbox/query/QueryBuilder.html#backlink-io.objectbox.relation.RelationInfo-" target="_blank" rel="noopener noreferrer"><code>backlink(RelationInfo)</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> method to create a backlink to the <code>addresses</code> relation from <code>Person</code> just for that query:</p> <div class="tabs-component"><ul role="tablist" class="tabs-component-tabs"></ul> <div class="tabs-component-panels"><section aria-hidden="true" id="java" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// get all Address objects with street &quot;Sesame Street&quot;...</span>
<span class="token class-name">QueryBuilder</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Address</span><span class="token punctuation">&gt;</span></span> builder <span class="token operator">=</span> addressBox<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token class-name">Address_</span><span class="token punctuation">.</span>street<span class="token punctuation">,</span> <span class="token string">&quot;Sesame Street&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ...which are linked from a Person named &quot;Elmo&quot;</span>
builder<span class="token punctuation">.</span><span class="token function">backlink</span><span class="token punctuation">(</span><span class="token class-name">Person_</span><span class="token punctuation">.</span>addresses<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token class-name">Person_</span><span class="token punctuation">.</span>name<span class="token punctuation">,</span> <span class="token string">&quot;Elmo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Address</span><span class="token punctuation">&gt;</span></span> sesameStreetsWithElmo <span class="token operator">=</span> builder<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></section> <section aria-hidden="true" id="kotlin" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token comment">// get all Address objects with street &quot;Sesame Street&quot;...</span>
<span class="token keyword">val</span> builder <span class="token operator">=</span> addressBox<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span>Address_<span class="token punctuation">.</span>street<span class="token punctuation">,</span> <span class="token string">&quot;Sesame Street&quot;</span><span class="token punctuation">)</span>
<span class="token comment">// ...which are linked from a Person named &quot;Elmo&quot;</span>
builder<span class="token punctuation">.</span><span class="token function">backlink</span><span class="token punctuation">(</span>Person_<span class="token punctuation">.</span>addresses<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span>Person_<span class="token punctuation">.</span>name<span class="token punctuation">,</span> <span class="token string">&quot;Elmo&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">val</span> sesameStreetsWithElmo <span class="token operator">=</span> builder<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></section></div></div> <h2 id="eager-loading-of-relations"><a href="#eager-loading-of-relations" class="header-anchor">#</a> Eager Loading of Relations</h2> <p>By default <a href="https://docs.objectbox.io/relations" target="_blank" rel="noopener noreferrer">relations<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> are loaded lazily: when you first access a <code>ToOne</code> or <code>ToMany</code> property it will perform a database lookup to get its data. On each subsequent access it will use a cached version of that data.</p> <div class="tabs-component"><ul role="tablist" class="tabs-component-tabs"></ul> <div class="tabs-component-panels"><section aria-hidden="true" id="java" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Customer</span><span class="token punctuation">&gt;</span></span> customers <span class="token operator">=</span> customerBox<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Customer has a ToMany called orders.</span>
<span class="token comment">// First access: this will cause a database lookup.</span>
<span class="token class-name">Order</span> order <span class="token operator">=</span> customers<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span>orders<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></section> <section aria-hidden="true" id="kotlin" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">val</span> customers <span class="token operator">=</span> customerBox<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// Customer has a ToMany called orders</span>
<span class="token keyword">val</span> order <span class="token operator">=</span> customers<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>orders<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token comment">// first access: this will cause a database lookup</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></section></div></div> <p>While this initial lookup is fast, you might want to prefetch <code>ToOne</code> or <code>ToMany</code> values before the query results are returned. To do this call the <a href="http://objectbox.io/files/objectbox-java/current/io/objectbox/query/QueryBuilder.html#eager-io.objectbox.relation.RelationInfo-io.objectbox.relation.RelationInfo...-" target="_blank" rel="noopener noreferrer"><code>QueryBuilder.eager</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> method when building your query and pass the <code>RelationInfo</code> objects associated with the <code>ToOne</code> and <code>ToMany</code> properties to prefetch:</p> <div class="tabs-component"><ul role="tablist" class="tabs-component-tabs"></ul> <div class="tabs-component-panels"><section aria-hidden="true" id="java" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Customer</span><span class="token punctuation">&gt;</span></span> customers <span class="token operator">=</span> customerBox<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">eager</span><span class="token punctuation">(</span><span class="token class-name">Customer_</span><span class="token punctuation">.</span>orders<span class="token punctuation">)</span> <span class="token comment">// Customer has a ToMany called orders.</span>
    <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// First access: this will cause a database lookup.</span>
<span class="token class-name">Order</span> order <span class="token operator">=</span> customers<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span>orders<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></section> <section aria-hidden="true" id="kotlin" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">val</span> customers <span class="token operator">=</span> customerBox<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">eager</span><span class="token punctuation">(</span>Customer_<span class="token punctuation">.</span>orders<span class="token punctuation">)</span> <span class="token comment">// Customer has a ToMany called orders</span>
    <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
customers<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>orders<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token comment">// first access: this will NOT cause a database lookup</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></section></div></div> <p>Eager loading only works one level deep. If you have <strong>nested relations</strong> and you want to prefetch relations of all children, you can instead add a query filter as described below. Use it to simply access all relation properties, which triggers them to lookup there values as described above.</p> <h2 id="query-filters"><a href="#query-filters" class="header-anchor">#</a> Query filters</h2> <p>Query filters come into play when you are looking for objects that need to match complex conditions, which cannot be fully expressed with the QueryBuilder class. Filters are written in Java and thus can express any complexity. Needless to say that database conditions can be matched more efficiently than Java based filters. Thus you will get best results when you use both together:</p> <ol><li>Narrow down results using standard database conditions to a reasonable number (use QueryBuilder to get “candidates”)</li> <li>Now filter those candidates using the <a href="http://objectbox.io/files/objectbox-java/current/io/objectbox/query/QueryFilter.html" target="_blank" rel="noopener noreferrer">QueryFilter<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> Java interface to identify final results</li></ol> <p>A QueryFilter implementation looks at one candidate object at a time and returns true if the candidate is a result or false if not.</p> <p>Example:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// Reduce object count to reasonable value.</span>
songBox<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token class-name">Song_</span><span class="token punctuation">.</span>bandId<span class="token punctuation">,</span> bandId<span class="token punctuation">)</span>
        <span class="token comment">// Filter is performed on candidate objects.</span>
        <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span>song<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> song<span class="token punctuation">.</span>starCount <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">&gt;</span> song<span class="token punctuation">.</span>downloads<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>Notes on performance: 1) ObjectBox creates objects very fast. 2) The virtual machine is tuned to garbage collect short lived objects. Notes 1) and 2) combined makes a case for filtering because ObjectBox creates candidate objects of which some are not used and thus get garbage collected quickly after their creation.</p> <h3 id="query-filters-and-tomany-relation"><a href="#query-filters-and-tomany-relation" class="header-anchor">#</a> Query filters and ToMany relation</h3> <p>The ToMany class offers additional methods that can be convenient in query filters:</p> <ul><li>hasA: returns true if one of elements matches the given QueryFilter</li> <li>hasAll: returns true if all of elements match the given QueryFilter</li> <li>getById: return the element with the given ID (value of the property with the @Id annotation)</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/docs/third-party/objectbox/kotlin-support.html" class="prev">
        Kotlin Support
      </a></span> <span class="next"><a href="/docs/third-party/objectbox/data-observers-and-rx.html">
        Data Observers &amp; Rx
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/docs/assets/js/app.1dda1ef8.js" defer></script><script src="/docs/assets/js/2.1637da50.js" defer></script><script src="/docs/assets/js/91.6f03a350.js" defer></script>
  </body>
</html>
