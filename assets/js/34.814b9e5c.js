(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{390:function(t,e,s){"use strict";s.r(e);var a=s(42),n=Object(a.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"queries"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#queries"}},[t._v("#")]),t._v(" Queries")]),t._v(" "),s("p",[t._v("Queries return entities matching certain criteria. In greenDAO you can formulate queries with raw SQL, or more easily with the "),s("a",{attrs:{href:"http://greenrobot.org/files/greendao/javadoc/current/org/greenrobot/greendao/query/QueryBuilder.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("QueryBuilder"),s("OutboundLink")],1),t._v(" API.")]),t._v(" "),s("p",[t._v("Also, queries support lazy-loading results, which may save memory and performance when operating on large result sets.")]),t._v(" "),s("h2",{attrs:{id:"querybuilder"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#querybuilder"}},[t._v("#")]),t._v(" QueryBuilder")]),t._v(" "),s("p",[t._v("Writing SQL can be difficult and is prone to errors which are only noticed at run time. The "),s("a",{attrs:{href:"http://greenrobot.org/files/greendao/javadoc/current/org/greenrobot/greendao/query/QueryBuilder.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("QueryBuilder"),s("OutboundLink")],1),t._v(" class lets you build custom queries for your entities without SQL and helps detect errors already at compile time.")]),t._v(" "),s("p",[s("strong",[t._v("Simple condition example")]),t._v(": Query for all users with the first name “Joe”, ordered by last name:")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" joes "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" userDao"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("queryBuilder")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("where")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Properties"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("FirstName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("eq")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Joe"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("orderAsc")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Properties"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("LastName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("list")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])]),s("p",[s("strong",[t._v("Nested conditions example:")]),t._v(" Get users with the first name “Joe” that are born in October 1970 or later.")]),t._v(" "),s("p",[t._v("Let’s say we have a user’s birthday as separate properties for year, month, and day. Then, we could express the condition in a more formal way: First name "),s("strong",[t._v("is")]),t._v(' "Joe" '),s("strong",[t._v("AND")]),t._v(" (year of birth "),s("strong",[t._v("is")]),t._v(" greater than 1970 "),s("strong",[t._v("OR")]),t._v(" (year of birth "),s("strong",[t._v("is")]),t._v(" 1970 "),s("strong",[t._v("AND")]),t._v(" month of birth "),s("strong",[t._v("is")]),t._v(" equal "),s("strong",[t._v("to")]),t._v(" "),s("strong",[t._v("or")]),t._v(" greater than 10)) (the 10th month, October).")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("QueryBuilder")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" qb "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" userDao"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("queryBuilder")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nqb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("where")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Properties"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("FirstName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("eq")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Joe"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\nqb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("or")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Properties"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("YearOfBirth")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("gt")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1970")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\nqb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("and")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Properties"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("YearOfBirth")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("eq")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1970")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Properties"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("MonthOfBirth")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ge")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" youngJoes "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" qb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("list")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\t\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])]),s("h2",{attrs:{id:"order"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#order"}},[t._v("#")]),t._v(" Order")]),t._v(" "),s("p",[t._v("You can order the results of a query. Based on the example of people with last names and year of birth:")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// order by last name")]),t._v("\nqueryBuilder"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("orderAsc")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Properties"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("LastName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n \n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// in reverse")]),t._v("\nqueryBuilder"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("orderDesc")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Properties"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("LastName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n \n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// order by last name and year of birth")]),t._v("\nqueryBuilder"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("orderAsc")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Properties"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("LastName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("orderDesc")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Properties"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("YearOfBirth")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br")])]),s("p",[t._v("The default collation used by greenDAO is COLLATE NOCASE , though it can be customized with stringOrderCollation(). See the "),s("a",{attrs:{href:"http://greenrobot.org/files/greendao/javadoc/current/org/greenrobot/greendao/query/QueryBuilder.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("QueryBuilder"),s("OutboundLink")],1),t._v(" class documentation for additional methods that affect the order of results.")]),t._v(" "),s("h2",{attrs:{id:"limit-offset-and-pagination"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#limit-offset-and-pagination"}},[t._v("#")]),t._v(" Limit, Offset, and Pagination")]),t._v(" "),s("p",[t._v("Sometimes you only need a subset of a query, for example the first 10 elements to display in your user interface. This is especially helpful (and resourceful) when you have a high number of entities and you cannot limit the result using “where” statements only. QueryBuilder"),s("T",[t._v(" has methods to define a limit and an offset:")])],1),t._v(" "),s("p",[s("a",{attrs:{href:"http://greenrobot.org/files/greendao/javadoc/current/org/greenrobot/greendao/query/QueryBuilder.html#limit-int-",target:"_blank",rel:"noopener noreferrer"}},[t._v("limit(int)"),s("OutboundLink")],1),t._v(": Limits the number of results returned by the query.")]),t._v(" "),s("p",[s("a",{attrs:{href:"http://greenrobot.org/files/greendao/javadoc/current/org/greenrobot/greendao/query/QueryBuilder.html#offset-int-",target:"_blank",rel:"noopener noreferrer"}},[t._v("offset(int)"),s("OutboundLink")],1),t._v(": Sets the offset for query results in combination with limit("),s("strong",[t._v("int")]),t._v("). The first offset results are skipped and the total number of results will be limited by limit("),s("strong",[t._v("int")]),t._v("). You cannot use offset without limit("),s("strong",[t._v("int")]),t._v(").")]),t._v(" "),s("h2",{attrs:{id:"custom-types-as-parameters"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#custom-types-as-parameters"}},[t._v("#")]),t._v(" Custom Types as Parameters")]),t._v(" "),s("p",[t._v("Usually, greenDAO maps the types used in queries transparently. For example, "),s("strong",[t._v("boolean")]),t._v(" is mapped to "),s("strong",[t._v("INTEGER")]),t._v(" with 0 or 1 values, and Date is mapped to ("),s("strong",[t._v("long")]),t._v(") "),s("strong",[t._v("INTEGER")]),t._v(" values.")]),t._v(" "),s("p",[s("a",{attrs:{href:"http://greenrobot.org/greendao/documentation/custom-types/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Custom types"),s("OutboundLink")],1),t._v(" are one exception to this: you always have to use the database value type when building a query. For example, if you have an enum type mapped to an "),s("strong",[t._v("int")]),t._v(" value using a converter, you should use the "),s("strong",[t._v("int")]),t._v(" value in the query.")]),t._v(" "),s("h2",{attrs:{id:"query-and-lazylist"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#query-and-lazylist"}},[t._v("#")]),t._v(" Query and LazyList")]),t._v(" "),s("p",[t._v("The "),s("a",{attrs:{href:"http://greenrobot.org/files/greendao/javadoc/current/org/greenrobot/greendao/query/Query.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Query"),s("OutboundLink")],1),t._v(" class represents a query that can be executed multiple times. When you use one of the methods in QueryBuilder to fetch a result (like list()), QueryBuilder"),s("T",[t._v(" internally uses the Query"),s("T",[t._v(" class. If you want to run the same query more than once, you should call build() on the QueryBuilder"),s("T",[t._v(" to create the query without executing it.")])],1)],1)],1),t._v(" "),s("p",[t._v("greenDAO supports unique results (0 or 1 result) and result lists. If you expect a unique result call unique() on the Query"),s("T",[t._v(" (or QueryBuilder"),s("T",[t._v("), which will give you a single result or null, if no matching entity was found. If your use case prohibits null as an outcome, call uniqueOrThrow() which will guarantee to return an non-null entity (otherwise it will throw a DaoException).")])],1)],1),t._v(" "),s("p",[t._v("If you expect multiple entities as a query result, use one of the following methods:")]),t._v(" "),s("ul",[s("li",[t._v("list() All entities are loaded into memory. The result is typically an ArrayList with no magic involved. Easiest to use.")]),t._v(" "),s("li",[t._v("listLazy() Entities are loaded into memory on-demand. Once an element in the list is accessed for the first time, it is loaded and cached for future use. Must be closed.")]),t._v(" "),s("li",[t._v("listLazyUncached() A “virtual” list of entities: any access to a list element results in loading its data from the database. Must be closed.")]),t._v(" "),s("li",[t._v("listIterator() Let’s you iterate through results by loading the data on-demand (lazily). Data is not cached. Must be closed.")])]),t._v(" "),s("p",[t._v("The methods listLazy(), listLazyUncached(), and listIterator() make use of greenDAO’s "),s("a",{attrs:{href:"http://greenrobot.org/files/greendao/javadoc/current/org/greenrobot/greendao/query/LazyList.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("LazyList"),s("OutboundLink")],1),t._v(" class. To load data on-demand, it holds a reference to a database cursor. This is the reason you must ensure to close the lazy lists and iterators (typically in a try/finally block).")]),t._v(" "),s("p",[s("em",[t._v("The cached lazy list from listLazy() and the lazy iterator from listIterator() closes the cursor automatically, once all elements are accessed or traversed. However, it’s your job to call close() if the list processing stops prematurely.")])]),t._v(" "),s("h3",{attrs:{id:"executing-queries-multiple-times"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#executing-queries-multiple-times"}},[t._v("#")]),t._v(" Executing Queries multiple times")]),t._v(" "),s("p",[t._v("Once you built a query using the QueryBuilder, the Query object "),s("strong",[t._v("can be reused")]),t._v(" to execute the query later. This is more efficient than always creating new Query objects. If the query parameters don’t change you can just call one of the list/unique methods again.")]),t._v(" "),s("p",[t._v("However, "),s("strong",[t._v("parameters may be changed")]),t._v(": call the setParameter method for each changed parameter. Currently, individual parameters are addressed by a zero-based parameter index. The index is based on the order you pass the parameters to QueryBuilder. For example:")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// fetch users with Joe as a first name born in 1970")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Query")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" query "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" userDao"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("queryBuilder")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("where")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Properties"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("FirstName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("eq")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Joe"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Properties"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("YearOfBirth")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("eq")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1970")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("build")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" joesOf1970 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" query"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("list")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n \n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// using the same Query object, we can change the parameters")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// to search for Marias born in 1977 later:")]),t._v("\nquery"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setParameter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Maria"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nquery"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setParameter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1977")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" mariasOf1977 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" query"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("list")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br")])]),s("h2",{attrs:{id:"executing-queries-in-multiple-threads"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#executing-queries-in-multiple-threads"}},[t._v("#")]),t._v(" Executing queries in multiple threads")]),t._v(" "),s("p",[t._v("If you use queries in multiple threads, you must call forCurrentThread() to get a Query instance for the current thread. Object "),s("strong",[t._v("instances of Query are bound to their owning thread that built the query")]),t._v(".")]),t._v(" "),s("p",[t._v("This lets you safely set parameters on the Query object while other threads cannot interfere. If other threads try to set parameters on the query or execute the query bound to another thread, an exception will be thrown. Like this, you don’t need a synchronized statement. In fact you should avoid locking because this may lead to deadlocks if concurrent transactions use the same Query object.")]),t._v(" "),s("p",[s("em",[t._v("Every time, forCurrentThread() is called, the parameters are set to the initial parameters at the time the query was built using its builder.")])]),t._v(" "),s("h2",{attrs:{id:"raw-queries"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#raw-queries"}},[t._v("#")]),t._v(" Raw queries")]),t._v(" "),s("p",[t._v("In case QueryBuilder does not provide what you need, there are two approaches to execute raw SQL that still return entity objects. The first, preferred way is to use QueryBuilder and WhereCondition.StringCondition. With this you can pass any SQL fragments as the WHERE clause to the query builder.")]),t._v(" "),s("p",[t._v("The following code is a theoretical example how you could run a sub select (using a "),s("a",{attrs:{href:"http://greenrobot.org/documentation/joins/",target:"_blank",rel:"noopener noreferrer"}},[t._v("join"),s("OutboundLink")],1),t._v(" would be the better solution):")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Query")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" query "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" userDao"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("queryBuilder")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("where")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("StringCondition")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"_ID IN "')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"(SELECT USER_ID FROM USER_MESSAGE WHERE READ_FLAG = 0)"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("build")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])]),s("p",[t._v("The second approach outside of QueryBuilder is to use the queryRaw or queryRawCreate methods. They allow you to pass a raw SQL string, which is appended after the SELECT and the entities columns. This way, you can have any WHERE and ORDER BY clause you want to select entities. The entity table can be referred to using the alias T.")]),t._v(" "),s("p",[t._v("The following example shows how to create a query that retrieves users of the group called “admin” using a join (again, greenDAO supports "),s("a",{attrs:{href:"http://greenrobot.org/documentation/joins/",target:"_blank",rel:"noopener noreferrer"}},[t._v("joins"),s("OutboundLink")],1),t._v(" natively, this is just to demonstrate):")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Query")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" query "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" userDao"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("queryRawCreate")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('", GROUP G WHERE G.NAME=? AND T.GROUP_ID=G._ID"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"admin"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("p",[s("em",[t._v("Note: You can refer to table and column names using generated constants. This is recommended to avoid typos because the compiler will check the names. In an entity’s DAO, you will find TABLENAME holding the name of the database table, and an inner class Properties with constants for all properties (field columnName).")])]),t._v(" "),s("h2",{attrs:{id:"delete-queries"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#delete-queries"}},[t._v("#")]),t._v(" Delete queries")]),t._v(" "),s("p",[t._v("Bulk deletes do not delete individual entities, but all entities matching some criteria. To perform bulk deletes, create a QueryBuilder, call its buildDelete() method, and execute the returned DeleteQuery.")]),t._v(" "),s("p",[s("em",[t._v("This part of the API may change in the future, for example convenience methods may be added.")])]),t._v(" "),s("p",[s("em",[t._v("Keep in mind, that bulk deletes currently do not affect entities in the identity scope, for example you could “resurrect” deleted entities if they have been cached before and are accessed by their ID (load method). Consider clearing the identity scope for now, if that may cause issues for your use case.")])]),t._v(" "),s("h2",{attrs:{id:"troubleshooting-queries"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#troubleshooting-queries"}},[t._v("#")]),t._v(" Troubleshooting queries")]),t._v(" "),s("p",[t._v("Your query does not return the expected result? There are two static flags to enable SQL and parameter logging on QueryBuilder:")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("QueryBuilder")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("LOG_SQL "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("QueryBuilder")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("LOG_VALUES "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("p",[t._v("Those will log the resulting SQL command and the passed values when calling one of the build methods, compare them against what you actually expected. Furthermore, it might help to copy the generated SQL into some SQLite database explorer and see how it executes.")])])}),[],!1,null,null,null);e.default=n.exports}}]);