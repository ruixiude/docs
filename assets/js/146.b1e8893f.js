(window.webpackJsonp=window.webpackJsonp||[]).push([[146],{505:function(s,a,t){"use strict";t.r(a);var n=t(42),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"集成流程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#集成流程"}},[s._v("#")]),s._v(" 集成流程")]),s._v(" "),t("h2",{attrs:{id:"maven自动集成-推荐"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#maven自动集成-推荐"}},[s._v("#")]),s._v(" maven自动集成（推荐）")]),s._v(" "),t("p",[s._v("通过在Android Studio工程build.gradle配置脚本中添加maven线上依赖，导入最新版本组件化统计SDK。")]),s._v(" "),t("h3",{attrs:{id:"maven依赖配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#maven依赖配置"}},[s._v("#")]),s._v(" maven依赖配置")]),s._v(" "),t("p",[s._v("在工程build.gradle配置脚本中buildscript和allprojects段中添加【友盟+】SDK新maven仓库地址。")]),s._v(" "),t("div",{staticClass:"language-groovy line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-groovy"}},[t("code",[s._v("maven "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" url "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'https://dl.bintray.com/umsdk/release'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("div",{staticClass:"language-groovy line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-groovy"}},[t("code",[s._v("buildscript "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    repositories "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("google")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("jcenter")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        maven "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" url "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'https://dl.bintray.com/umsdk/release'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    dependencies "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        classpath "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'com.android.tools.build:gradle:3.4.0'")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// NOTE: Do not place your application dependencies here; they belong")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// in the individual module build.gradle files")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\nallprojects "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    repositories "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("google")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("jcenter")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        maven "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" url "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'https://dl.bintray.com/umsdk/release'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br")])]),t("p",[s._v("在工程App 对应build.gradle配置脚本dependencies段中添加统计SDK库和其它库依赖：")]),s._v(" "),t("div",{staticClass:"language-groovy line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-groovy"}},[t("code",[s._v("dependencies "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    implementation "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("fileTree")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("include"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'*.jar'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" dir"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'libs'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 下面各SDK根据宿主App是否使用相关业务按需引入。")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 友盟统计SDK")]),s._v("\n    implementation  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'com.umeng.umsdk:common:9.3.6'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 必选")]),s._v("\n    implementation  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'com.umeng.umsdk:asms:1.2.1'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 必选")]),s._v("\n\n    implementation  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'com.umeng.umsdk:abtest:1.0.0'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//可选（使用U-App中ABTest能力）")]),s._v("\n    implementation "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'com.umeng.umsdk:apm:1.1.1'")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//可选（集成U-APM）")]),s._v("\n    implementation "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'com.umeng.umsdk:link:1.0.0'")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//可选（集成U-Link）")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("p",[s._v("在Android Studio 3.1及以上版本开发环境下，指定引用最新版本依赖写法”latest.integration”可能导致下载库超时，此时需要指定具体版本号。")]),s._v(" "),t("blockquote",[t("p",[s._v("注意：OAID目前为目前国内市场主流的Android Q设备标识。目前主流厂商（华为、oppo、vivo、联想、小米）均已在新版本系统中支持该标识的获取，具有权威性。")]),s._v(" "),t("p",[s._v("SDK 9.3.6版本中移除了稳定性模块（错误捕获），如需，请集成应用性能监控SDK。集成文档为：https://developer.umeng.com/docs/193624/detail/194590")]),s._v(" "),t("p",[s._v("SDK 9.3.6版本中移除了分析裂变能力，如需，请集成智能超链SDK。集成文档为：https://developer.umeng.com/docs/191212/detail/191230")])]),s._v(" "),t("h2",{attrs:{id:"手动集成"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#手动集成"}},[s._v("#")]),s._v(" 手动集成")]),s._v(" "),t("p",[s._v("访问【友盟+】官网组件化SDK下载地址，选择Android平台"),t("a",{attrs:{href:"http://developer.umeng.com/sdk",target:"_blank",rel:"noopener noreferrer"}},[s._v("下载"),t("OutboundLink")],1),s._v("页面，选择对应业务SDK进行下载。")]),s._v(" "),t("p",[s._v("将下载的SDK zip包解压缩，得到如下文件：")]),s._v(" "),t("ul",[t("li",[s._v("umeng-common-9.3.6.jar // 统计SDK")]),s._v(" "),t("li",[s._v("umeng-asms-armeabi-vx.x.x.aar // 重要组件，如不集成会在初始化时输出e级别的LOG提示和Toast提示")]),s._v(" "),t("li",[s._v("umeng-abtest-vx.x.x.aar //U-App中ABTest模块依赖组件")]),s._v(" "),t("li",[s._v("umeng-crash-armeabi-v0.0.5.aar // 错误捕获依赖组件，该组件已经不存在，如果需要错误捕获能力，请下载集成应用性能SDK，产品文档为"),t("a",{attrs:{href:"https://developer.umeng.com/docs/193624/detail/194565",target:"_blank",rel:"noopener noreferrer"}},[s._v("应用性能监控产品U-APM"),t("OutboundLink")],1),s._v("。")])]),s._v(" "),t("h3",{attrs:{id:"android-studio集成-推荐"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#android-studio集成-推荐"}},[s._v("#")]),s._v(" Android Studio集成 （推荐）")]),s._v(" "),t("ul",[t("li",[s._v("选择SDK功能组件并下载，解压.zip文件得到相应组件包（umeng-common-9.x.x.jar），在Android Studio的项目工程libs目录中拷入相关组件jar包，右键Android Studio的项目工程 —> 选择Open Module Settings —> 在 Project Structure弹出框中 —> 选择 Dependencies选项卡 —> 点击左下“＋” —> 选择组件包类型 —> 引入相应的包。")]),s._v(" "),t("li",[s._v("如果您的项目工程没有使用过.so动态库，或者仅适配armeabi 平台，则可以从解压的.zip文件中，找到umeng-asms-armeabi-vx.x.x.aar库和umeng-apm-armeabi-vx.x.x.aar库（注意：umeng-asms-armeabi-vx.x.x.aar库和和umeng-apm-armeabi-vx.x.x.aar库默认仅适配armeabi平台），在项目工程的libs目录中拷入umeng-asms-armeabi-vx.x.x.aar组件和和umeng-apm-armeabi-vx.x.x.aar组件，在app的build.gradle文件中引入相应的组件包。参考示例如下:")])]),s._v(" "),t("div",{staticClass:"language-groovy line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-groovy"}},[t("code",[s._v("repositories"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    flatDir"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        dirs "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'libs'")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\ndependencies "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    implementation "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("fileTree")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("include"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'*.jar'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" dir"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'libs'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    implementation "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'umeng-asms-armeabi-vx.x.x'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ext"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'aar'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    implementation "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'umeng-abtest-vx.x.x'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ext"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'aar'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    implementation "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'umeng-apm-armeabi-vx.x.x'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ext"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'aar'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("ul",[t("li",[t("p",[s._v("如果您的项目工程需要适配armeabi 以外的平台，如：armeabi-v7、x86等，则需要下载"),t("a",{attrs:{href:"https://developer.umeng.com/docs/119267/detail/191190",target:"_blank",rel:"noopener noreferrer"}},[s._v("umeng-asms-vx.x.x库和umeng-apm-vx.x.x库"),t("OutboundLink")],1),s._v("，在Android Studio的项目工程libs目录中拷入所有组件jar包，右键Android Studio的项目工程 —> 选择Open Module Settings —> 在 Project Structure弹出框中 —> 选择 Dependencies选项卡 —> 点击左下“＋” —> 选择组件包类型 —> 引入相应的包。然后根据您项目工程对应的平台分别考入对应的.so。")]),s._v(" "),t("p",[s._v("umeng-asms-vx.x.x库文件下载链接：https://developer.umeng.com/docs/119267/detail/191190")]),s._v(" "),t("p",[s._v("umeng-apm-vx.x.x库文件下载链接：https://developer.umeng.com/docs/119267/detail/191190")]),s._v(" "),t("p",[s._v("原umeng-crash-vx.x.x库文件下载链接：https://developer.umeng.com/docs/119267/detail/191190")])])]),s._v(" "),t("p",[t("strong",[s._v("常见问题：")]),s._v("\nso库加载失败、couldn’t find “libumeng-spy.so” 、couldn’t find “libcrashsdk.so”该如何解决？"),t("a",{attrs:{href:"https://developer.umeng.com/docs/119267/detail/191190",target:"_blank",rel:"noopener noreferrer"}},[s._v("查看解决方案"),t("OutboundLink")],1)]),s._v(" "),t("h3",{attrs:{id:"eclipse集成"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#eclipse集成"}},[s._v("#")]),s._v(" Eclipse集成")]),s._v(" "),t("ul",[t("li",[s._v("选择SDK功能组件并下载，解压.zip文件得到相应组件包（例如：umeng-common-9.x.x.jar等）。")]),s._v(" "),t("li",[s._v("在Eclipse中右键工程根目录，选择Properties —> Java Build Path —> Libraries，然后点击Add External JARs… 选择指向jar的路径，点击OK，即导入成功。（ADT17及以上不需要手动导入）。")])]),s._v(" "),t("h3",{attrs:{id:"android-q-oaid库接入说明"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#android-q-oaid库接入说明"}},[s._v("#")]),s._v(" Android Q OAID库接入说明")]),s._v(" "),t("p",[s._v("接入方法：")]),s._v(" "),t("ol",[t("li",[s._v("接入统计SDK 9.x.x。")]),s._v(" "),t("li",[s._v("在您下载的安装包中，找到以下文件夹：")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("/thirdparties/thirdparties_android_1.1.0/OaidSDK\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("将以下四个文件拷贝至您的lib目录下。")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("//SDK 9.2.4及以上版本自带oaid采集模块，不再需要开发者再手动引用如下4个库\nlenovo-opendeviceid.jar\nmi-deviceid.jar\noppo-openid-sdk-1.0.4.jar\nvivoId-1.0.0.1.jar\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("blockquote",[t("p",[s._v("注意：OAID目前为目前国内市场主流的Android Q设备标识。目前主流厂商（华为、oppo、vivo、联想、小米）均已在新版本系统中支持该标识的获取，具有权威性。您可根据需求选择接入（华为已默认接入无需额外添加jar包）。")]),s._v(" "),t("p",[s._v("特别提醒：如您不在U-App的集成中加入OAID库，可能会导致U-App面向Android Q系统的新增、启动、活跃、留存等指标减少，因此，建议您接入OAID库。")])]),s._v(" "),t("h3",{attrs:{id:"utdid接入说明"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#utdid接入说明"}},[s._v("#")]),s._v(" UTDID接入说明")]),s._v(" "),t("p",[s._v("UTDID：utdid4all-x.x.x.x_proguard.jar 是阿里UTDID服务的补充包，可以自行选择是否集成。")]),s._v(" "),t("p",[s._v("接入方法：")]),s._v(" "),t("ol",[t("li",[s._v("解压从【友盟+】组件化SDK下载页下载的.zip文件")]),s._v(" "),t("li",[s._v("把解压缩后得到的目录下的thirdparties目录里的utdid4all-.*这个jar文件拷贝到项目工程的libs目录。")])]),s._v(" "),t("p",[s._v("若编译时报ta.utdid2.xx或ut.device.xx等冲突异常，请将项目工程的libs目录中的utdid4all-.*这个jar文件删除，重新编译即可。")]),s._v(" "),t("h1",{attrs:{id:"权限授予"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#权限授予"}},[s._v("#")]),s._v(" 权限授予")]),s._v(" "),t("p",[s._v("统计SDK需要宿主APP授予如下权限：")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("权限")]),s._v(" "),t("th",[s._v("用途")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("ACCESS_NETWORK_STATE")]),s._v(" "),t("td",[s._v("检测联网方式，在网络异常状态下避免数据发送，节省流量和电量。")])]),s._v(" "),t("tr",[t("td",[s._v("READ_PHONE_STATE")]),s._v(" "),t("td",[s._v("获取用户设备的IMEI，通过IMEI对用户进行唯一标识，以便提供统计分析服务。")])]),s._v(" "),t("tr",[t("td",[s._v("ACCESS_WIFI_STATE")]),s._v(" "),t("td",[s._v("获取WIFI mac地址，在平板设备或电视盒子上，无法通过IMEI标识设备，我们会将WIFI mac地址作为用户的唯一标识，以便正常提供统计分析服务。")])]),s._v(" "),t("tr",[t("td",[s._v("INTERNET")]),s._v(" "),t("td",[s._v("允许应用程序联网和发送统计数据的权限，以便提供统计分析服务。")])]),s._v(" "),t("tr",[t("td",[s._v("ACCESS_FINE_LOCATION（可选）")]),s._v(" "),t("td",[s._v("通过获取位置信息，为开发者提供反作弊功能，剔除作弊设备；同时校正用户的地域分布数据，使报表数据更加准确。")])]),s._v(" "),t("tr",[t("td",[s._v("ACCESS_COARSE_LOCATION（可选）")]),s._v(" "),t("td",[s._v("通过获取位置信息，为开发者提供反作弊功能，剔除作弊设备；同时校正用户的地域分布数据，使报表数据更加准确。")])])])]),s._v(" "),t("p",[s._v("下面给出AndroidManifest.xml清单文件示例：")]),s._v(" "),t("div",{staticClass:"language-xml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-xml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("manifest")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("……")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("uses-sdk")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[t("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("android:")]),s._v("minSdkVersion")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("8"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("uses-sdk")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("uses-permission")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[t("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("android:")]),s._v("name")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("android.permission.ACCESS_NETWORK_STATE"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("/>")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("uses-permission")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[t("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("android:")]),s._v("name")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("android.permission.ACCESS_WIFI_STATE"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("/>")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("uses-permission")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[t("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("android:")]),s._v("name")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("android.permission.READ_PHONE_STATE"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("/>")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("uses-permission")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[t("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("android:")]),s._v("name")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("android.permission.INTERNET"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("/>")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("application")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("……")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("h2",{attrs:{id:"混淆设置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#混淆设置"}},[s._v("#")]),s._v(" 混淆设置")]),s._v(" "),t("p",[s._v("如果您的应用使用了代码混淆，请添加如下配置，以避免【友盟+】SDK被错误混淆导致SDK不可用。")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("-keep class com.umeng.** {*;}\n\n//您如果使用了稳定性模块可以加入该混淆\n-keep class com.uc.** {*;}\n\n-keepclassmembers class * {\n   public <init> (org.json.JSONObject);\n}\n-keepclassmembers enum * {\n    public static **[] values();\n    public static ** valueOf(java.lang.String);\n}\n\n//SDK 9.2.4及以上版本自带oaid采集模块，不再需要开发者再手动引用oaid库，所以可以不添加这些混淆\n-keep class com.zui.** {*;}\n-keep class com.miui.** {*;}\n-keep class com.heytap.** {*;}\n-keep class a.** {*;}\n-keep class com.vivo.** {*;}\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br")])]),t("p",[s._v("SDK需要引用导入工程的资源文件，通过了反射机制得到资源引用文件R.java，但是在开发者通过proguard等混淆/优化工具处理apk时，proguard可能会将R.java删除，如果遇到这个问题，请添加如下配置：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("-keep public class [您的应用包名].R$*{public static final int *;}\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h1",{attrs:{id:"常见问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#常见问题"}},[s._v("#")]),s._v(" 常见问题")]),s._v(" "),t("p",[s._v("["),t("a",{attrs:{href:"https://developer.umeng.com/docs/119267/detail/121488",target:"_blank",rel:"noopener noreferrer"}},[s._v("SDK申请敏感权限相关问题]"),t("OutboundLink")],1)]),s._v(" "),t("p",[s._v("["),t("a",{attrs:{href:"https://developer.umeng.com/docs/119267/detail/121466",target:"_blank",rel:"noopener noreferrer"}},[s._v("混淆相关问题]"),t("OutboundLink")],1)]),s._v(" "),t("p",[s._v("更多集成问题可点我进入["),t("a",{attrs:{href:"https://developer.umeng.com/docs/119267/cate/119530",target:"_blank",rel:"noopener noreferrer"}},[s._v("常见问题"),t("OutboundLink")],1),s._v("]")])])}),[],!1,null,null,null);a.default=e.exports}}]);