(window.webpackJsonp=window.webpackJsonp||[]).push([[71],{430:function(s,a,t){"use strict";t.r(a);var n=t(42),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"在线安装集成-零代码极速接入"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#在线安装集成-零代码极速接入"}},[s._v("#")]),s._v(" 在线安装集成(零代码极速接入)")]),s._v(" "),t("h2",{attrs:{id:"整体介绍"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#整体介绍"}},[s._v("#")]),s._v(" 整体介绍")]),s._v(" "),t("p",[t("strong",[s._v("此文档描述 "),t("code",[s._v("无埋点SDK")]),s._v(" 极速接入配置方式；如果希望使用gradle方式接入无埋点SDK，请参考"),t("a",{attrs:{href:"https://mtj.baidu.com/static/userguide/book/android/adconfig/circle/circle.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("可视化圈选接入"),t("OutboundLink")],1),s._v("。如果您使用的是手动埋点SDK版本，请参考"),t("a",{attrs:{href:"https://mtj.baidu.com/static/userguide/book/android/sdk/gradle.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("手动埋点SDK gradle接入"),t("OutboundLink")],1),s._v("。")])]),s._v(" "),t("p",[s._v("百度移动统计团队推出的全新"),t("code",[s._v("极速埋点")]),s._v("方案，一步完成SDK安装，省去了传统接入方案的繁琐步骤。")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("传统接入方案（繁琐）")]),s._v(" "),t("p",[s._v("一般开发者接入统计SDK需要至少完成四个步骤（配置 gradle 下载SDK；修改 AndroidManifest.xml 添加必须的权限；添加统计SDK调起代码；配置 proguard 避免混淆统计SDK），整体接入过程还是偏繁琐，而且容易出错。")])]),s._v(" "),t("li",[t("p",[s._v("极速埋点方案（推荐）")]),s._v(" "),t("p",[s._v("只需要一步（配置 graldle 以引入"),t("code",[s._v("百度统计零埋点插件")]),s._v("）即完成接入，"),t("code",[s._v("零埋点插件")]),s._v("会自动完成相关的 "),t("code",[s._v("SDK 下载，权限注入，启动代码注入，proguard 配置注入")]),s._v(" 等工作。")])])]),s._v(" "),t("h2",{attrs:{id:"接入过程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#接入过程"}},[s._v("#")]),s._v(" 接入过程")]),s._v(" "),t("h3",{attrs:{id:"基础接入"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#基础接入"}},[s._v("#")]),s._v(" 基础接入")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("找到项目根 build.gradle 文件，引用"),t("code",[s._v("百度统计零埋点插件库")])]),s._v(" "),t("div",{staticClass:"language-groovy line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-groovy"}},[t("code",[s._v(" repositories "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n     "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("jcenter")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n dependencies "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n     "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 引入插件库")]),s._v("\n     classpath "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'com.baidu.mobstat:mtj-circle-plugin:latest.integration'")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("项目主module build.gradle 文件，添加"),t("code",[s._v("百度统计零埋点插件")])]),s._v(" "),t("div",{staticClass:"language-groovy line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-groovy"}},[t("code",[s._v(" apply plugin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'mtj-circle-plugin'")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("项目主module build.gradle 文件，添加配置")]),s._v(" "),t("div",{staticClass:"language-groovy line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-groovy"}},[t("code",[s._v(" MtjCirclePluginConfig "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n     "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 设置appkey，必须设置，否则插件使用无效 ")]),s._v("\n     appkey "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'替换成您自己的appkey'")]),s._v("\n     "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 设置debug 开关，默认关闭，如果需要查看日志则打开开关（true），建议正式版关闭以避免影响性能")]),s._v("\n     debug "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("\n     "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 默认启动此插件，如果开发者不需要可以禁用（false）")]),s._v("\n     enabled "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 通过该接口可以控制隐私权限策略的数据采集，true表示可以采集，false表示不可以采集，请在Application里优先调用")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 采集这些数据可以帮助App运营人员更好的监控App的使用情况，")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 建议有用户隐私策略弹窗的App，用户未同意前设置false,同意之后设置true")]),s._v("\n StatService"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setAuthorizedState")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Context context"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("boolean")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("编译，运行即可")]),s._v(" "),t("p",[s._v("如果是通过 gradle 指令命令行编译（eg: gradlew assembleRelease / assembleDebug），可以看到gradle console 输出相关注入成功的信息。")]),s._v(" "),t("p",[s._v("编译项目并启动运行，5分钟左右后即可在"),t("a",{attrs:{href:"https://mtj.baidu.com/",target:"_blank",rel:"noopener noreferrer"}},[s._v("百度移动统计网站"),t("OutboundLink")],1),s._v("上看到对应的启动数据！")])])]),s._v(" "),t("h3",{attrs:{id:"高级配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#高级配置"}},[s._v("#")]),s._v(" 高级配置")]),s._v(" "),t("p",[s._v("开发者如果需要更复杂的高级配置功能，如 渠道，Crash采集，手动配置页面，手动配置事件，信息流分析 等功能，可以参考"),t("a",{attrs:{href:"https://mtj.baidu.com/static/userguide/book/android/adconfig.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("高级配置"),t("OutboundLink")],1),s._v("部分，直接添加相关api 调用即可。")]),s._v(" "),t("h2",{attrs:{id:"特殊说明"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#特殊说明"}},[s._v("#")]),s._v(" 特殊说明")]),s._v(" "),t("h3",{attrs:{id:"使用限制"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用限制"}},[s._v("#")]),s._v(" 使用限制")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("gradle plugin 版本限制")]),s._v(" "),t("p",[t("code",[s._v("零埋点插件")]),s._v("暂只支持 gradle plugin 3.0.0+ 版本，如果您需要使用零埋点插件，需要确保所使用的plugin版本符合要求，否则可能报错。确认方法：查看项目根 build.gradle 使用的gradle 即可（eg: "),t("code",[s._v("classpath 'com.android.tools.build:gradle:3.1.1'")]),s._v("）。")])]),s._v(" "),t("li",[t("p",[s._v("项目类型限制")]),s._v(" "),t("p",[t("code",[s._v("零埋点插件")]),s._v("仅支持"),t("code",[s._v("application")]),s._v("（"),t("code",[s._v("apply plugin: 'com.android.application'")]),s._v("）类型项目，不可用于"),t("code",[s._v("library")]),s._v("类型项目。")])]),s._v(" "),t("li",[t("p",[s._v("仅支持新接入SDK的APP")]),s._v(" "),t("p",[s._v("零埋点插件会自动下载安装最新版本SDK，如果当前本地项目已经引用了"),t("code",[s._v("百度统计SDK")]),s._v("，则可能导致包名冲突编译失败。如果发生这种情况，建议删除已有的"),t("code",[s._v("SDK JAR包/gradle 引用 + 相关启动代码埋点")]),s._v("。")])])]),s._v(" "),t("h3",{attrs:{id:"功能说明"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#功能说明"}},[s._v("#")]),s._v(" 功能说明")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("此插件默认安装的是"),t("code",[s._v("百度统计-无埋点SDK")]),s._v("版本")]),s._v(" "),t("ul",[t("li",[s._v("功能上，与无埋点SDK完全一致，只是通过插件的方式，省去了开发者的繁琐安装SDK步骤。")]),s._v(" "),t("li",[s._v("完成基础配置后，即会产出"),t("code",[s._v("页面pv，启动次数，用户数")]),s._v("等集成报告，事件埋点需要通过可视化圈选的方式完成，参考"),t("a",{attrs:{href:"https://mtj.baidu.com/static/userguide/book/android/adconfig/circle/circle.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("可视化圈选功能"),t("OutboundLink")],1),s._v("。（可视化圈选调起通过双手touch 手机方式，如果需要通过二维码方式，需要单独配置 AndroidManifest.xml 添加 scheme。）")])])]),s._v(" "),t("li",[t("p",[s._v("此插件会在编译期完成相关代码安装注入")]),s._v(" "),t("p",[s._v("为确保安装成功，请在编译产出release 包后通过线上数据验证统计功能。如果通过命令行编译（eg: gradlew assembleRelease / assembleDebug），可以"),t("code",[s._v("参考命令行log日志")]),s._v("确认是否安装成功。")])])]),s._v(" "),t("h3",{attrs:{id:"插件原理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#插件原理"}},[s._v("#")]),s._v(" 插件原理")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("权限注入")]),s._v(" "),t("p",[s._v("默认在"),t("code",[s._v("AndroidManifest.xml")]),s._v("注入以下权限，不会在代码中主动request 任何权限：")]),s._v(" "),t("div",{staticClass:"language-groovy line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-groovy"}},[t("code",[s._v(" "),t("span",{pre:!0,attrs:{class:"token string gstring"}},[s._v('"android.permission.INTERNET"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token string gstring"}},[s._v('"android.permission.ACCESS_NETWORK_STATE"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token string gstring"}},[s._v('"android.permission.ACCESS_WIFI_STATE"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token string gstring"}},[s._v('"android.permission.READ_PHONE_STATE"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token string gstring"}},[s._v('"android.permission.WRITE_EXTERNAL_STORAGE"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token string gstring"}},[s._v('"android.permission.ACCESS_FINE_LOCATION"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token string gstring"}},[s._v('"android.permission.BLUETOOTH"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token string gstring"}},[s._v('"android.permission.READ_EXTERNAL_STORAGE"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("代码注入")]),s._v(" "),t("p",[s._v("如果APP中有自定义Application，SDK默认会将启动代码注入到Applicaion#onCreate() 中。如果APP中没有自定义Application，则会找到入口Main Activity，将相关启动代码注入。")]),s._v(" "),t("p",[s._v("为保证数据准确性，避免因为SDK初始化时机原因导致特定页面监控不到，建议开发者在APP中定义"),t("code",[s._v("自定义Application")]),s._v("，插件会自动识别完成代码注入。")])]),s._v(" "),t("li",[t("p",[s._v("proguard注入")]),s._v(" "),t("p",[s._v("SDK 会在项目目录下生成 "),t("code",[s._v("proguard-baidu-mtj.pro")]),s._v(" 文件，指定不混淆百度统计相关类。")])])])])}),[],!1,null,null,null);a.default=e.exports}}]);