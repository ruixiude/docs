(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{391:function(e,t,s){"use strict";s.r(t);var a=s(42),n=Object(a.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"sessions"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#sessions"}},[e._v("#")]),e._v(" Sessions")]),e._v(" "),s("p",[e._v("The (generated) DaoSession class is "),s("a",{attrs:{href:"http://greenrobot.org/greendao/documentation/introduction/",target:"_blank",rel:"noopener noreferrer"}},[e._v("one of the central interfaces"),s("OutboundLink")],1),e._v(" to greenDAO. DaoSession provides developers access to basic entity operations and DAOs for a more complete set of operations. In addition, sessions also mange an identity scope for entities.")]),e._v(" "),s("h2",{attrs:{id:"daomaster-and-daosession"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#daomaster-and-daosession"}},[e._v("#")]),e._v(" DaoMaster and DaoSession")]),e._v(" "),s("p",[e._v("As documented in the "),s("a",{attrs:{href:"http://greenrobot.org/greendao/documentation/how-to-get-started/",target:"_blank",rel:"noopener noreferrer"}},[e._v("How to get started"),s("OutboundLink")],1),e._v(" section, you will need to create a DaoMasterto get a DaoSession:")]),e._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[e._v("daoMaster "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("new")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("DaoMaster")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("db"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\ndaoSession "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" daoMaster"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("newSession")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br")])]),s("p",[e._v("Notice that the database connection belongs to the DaoMaster, so "),s("strong",[e._v("multiple sessions refer to the same database connection")]),e._v(". Hence, new sessions can be created quite quickly. However, each session allocates memory, typically a session “cache” for entities.")]),e._v(" "),s("h2",{attrs:{id:"identity-scope-and-session-cache"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#identity-scope-and-session-cache"}},[e._v("#")]),e._v(" Identity scope and session “cache”")]),e._v(" "),s("p",[e._v("If you have two queries returning the same database object, how many Java objects are you working with: one or two? It depends entirely on the identity scope.")]),e._v(" "),s("p",[e._v("The default in greenDAO (the behavior is configurable) is that multiple queries return references to the same Java objects. For example, loading a User object from the USER table with ID 42 returns the same Java object for both queries.")]),e._v(" "),s("p",[e._v("A side effect of this is some kind of entity “caching”. If an entity object is still around in memory (greenDAO uses weak references here), the entity is not constructed again. Also, greenDAO performs no database query to update the entity values. Instead, the object is returned “immediately” from the session cache, which is one or two magnitudes faster.")]),e._v(" "),s("h3",{attrs:{id:"clear-the-identity-scope"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#clear-the-identity-scope"}},[e._v("#")]),e._v(" Clear the identity scope")]),e._v(" "),s("p",[e._v("To clear the identity scope of the whole session so no “cached” objects are returned:")]),e._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[e._v("daoSession"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("clear")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("p",[e._v("To clear the identity scope for just a single DAO:")]),e._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[e._v("noteDao "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" daoSession"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("getNoteDao")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\nnoteDao"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("detachAll")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br")])]),s("h2",{attrs:{id:"concepts"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#concepts"}},[e._v("#")]),e._v(" Concepts")]),e._v(" "),s("p",[e._v("This documentation page currently has limited information. Please refer to "),s("a",{attrs:{href:"http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html/transactions.html#transactions-basics-uow",target:"_blank",rel:"noopener noreferrer"}},[e._v("Hibernate’s session to grasp the full concept of sessions and identity scopes"),s("OutboundLink")],1),e._v(".")])])}),[],!1,null,null,null);t.default=n.exports}}]);