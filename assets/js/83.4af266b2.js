(window.webpackJsonp=window.webpackJsonp||[]).push([[83],{440:function(e,t,s){"use strict";s.r(t);var a=s(42),n=Object(a.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"object-ids"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#object-ids"}},[e._v("#")]),e._v(" Object IDs")]),e._v(" "),s("p",[e._v("Explanation of Object IDs and how they are used and assigned in ObjectBox.")]),e._v(" "),s("h2",{attrs:{id:"objectbox-object-ids"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#objectbox-object-ids"}},[e._v("#")]),e._v(" ObjectBox - Object IDs")]),e._v(" "),s("p",[s("strong",[e._v("Objects must have an ID property of type")]),e._v(" "),s("code",[e._v("**long**")]),s("strong",[e._v(".")]),e._v(" You are free to use the wrapper type "),s("code",[e._v("java.lang.Long")]),e._v(", but we advise against it in most cases. "),s("code",[e._v("long")]),e._v(" IDs are enforced to make ObjectBox very efficient internally.")]),e._v(" "),s("p",[e._v("If your application requires other ID types (such as a string UID given by a server), you can model them as standard properties and use "),s("a",{attrs:{href:"https://docs.objectbox.io/queries",target:"_blank",rel:"noopener noreferrer"}},[e._v("queries"),s("OutboundLink")],1),e._v(" to look up entities by your application specific ID.")]),e._v(" "),s("h2",{attrs:{id:"object-id-new-vs-persisted-entities"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#object-id-new-vs-persisted-entities"}},[e._v("#")]),e._v(" Object ID: new vs. persisted entities")]),e._v(" "),s("p",[e._v("When you create new entity objects (on the language level), they are not persisted yet and their ID is (zero). Once an entity is put (persisted), ObjectBox will assign an ID to the entity. You can access the ID property right after the call to "),s("code",[e._v("put()")]),e._v(".")]),e._v(" "),s("p",[e._v("Those are also applied the other way round: ObjectBox uses the "),s("strong",[e._v("ID as a state indication")]),e._v(" whether an entity is new (zero) or already persisted (non-zero). This is used internally, e.g. for relations which heavily rely on IDs.")]),e._v(" "),s("h2",{attrs:{id:"special-object-ids"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#special-object-ids"}},[e._v("#")]),e._v(" Special Object IDs")]),e._v(" "),s("p",[e._v("Object IDs may be any "),s("code",[e._v("long")]),e._v(" value, with two exceptions:")]),e._v(" "),s("ul",[s("li",[s("strong",[e._v("0 (zero):")]),e._v(" Objects with an ID of zero (and "),s("code",[e._v("null")]),e._v(" if the ID is of type "),s("code",[e._v("Long")]),e._v(") are considered new (not persisted before). Putting such an object will always insert a new object and assign an unused ID to it.")]),e._v(" "),s("li",[s("strong",[e._v("0xFFFFFFFFFFFFFFFF (-1 in Java):")]),e._v(" This value is reserved for internal use by ObjectBox and may not be used by the app.")])]),e._v(" "),s("h2",{attrs:{id:"object-id-assignment-default"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#object-id-assignment-default"}},[e._v("#")]),e._v(" Object ID assignment (default)")]),e._v(" "),s("p",[e._v("By default object IDs are assigned by ObjectBox. For each new object, ObjectBox will assign an unused ID that is above the current highest ID value used in a box. For example, if there are two objects with ID 1 and ID 100 in a box the next object that is put will be assigned ID 101.")]),e._v(" "),s("p",[e._v("Also note that this will mean in some circumstances IDs from deleted objects may be reused. So it is best to not rely on a specific ID getting assigned.")]),e._v(" "),s("p",[s("strong",[e._v("By default, only ObjectBox may assign IDs.")]),e._v(" If you try to put an object with an ID greater than the currently highest ID, ObjectBox will throw an error.")]),e._v(" "),s("h2",{attrs:{id:"self-assigned-object-ids"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#self-assigned-object-ids"}},[e._v("#")]),e._v(" Self-assigned Object IDs")]),e._v(" "),s("blockquote",[s("p",[e._v("This is not recommended. Check if using a "),s("a",{attrs:{href:"https://docs.objectbox.io/entity-annotations#object-ids-id",target:"_blank",rel:"noopener noreferrer"}},[e._v("unique indexed property"),s("OutboundLink")],1),e._v(" is a viable alternative.")])]),e._v(" "),s("p",[e._v("If you "),s("strong",[e._v("need to assign IDs by yourself")]),e._v(" you can change the ID annotation to:")]),e._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[e._v("@Id")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("assignable "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[e._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("long")]),e._v(" id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br")])]),s("p",[e._v("This will allow putting an entity with any valid ID. You can still set the ID to zero to let ObjectBox auto assign a new ID.")]),e._v(" "),s("blockquote",[s("p",[s("strong",[e._v("Warning:")]),e._v(" self-assigned IDs break automatic state detection (new vs. persisted entity based on the ID). Therefore, you should "),s("strong",[e._v("put entities with self-assigned IDs immediately and may have to attach the box manually")]),e._v(", especially when working with relations.")])]),e._v(" "),s("p",[e._v("For details see the documentation about "),s("a",{attrs:{href:"https://docs.objectbox.io/relations#updating-relations",target:"_blank",rel:"noopener noreferrer"}},[e._v("updating relations"),s("OutboundLink")],1),e._v(".")]),e._v(" "),s("h2",{attrs:{id:"string-id-alias-future-work"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#string-id-alias-future-work"}},[e._v("#")]),e._v(" String ID alias (future work)")]),e._v(" "),s("p",[e._v("Check "),s("a",{attrs:{href:"https://github.com/objectbox/objectbox-java/issues/167",target:"_blank",rel:"noopener noreferrer"}},[e._v("this issue"),s("OutboundLink")],1),e._v(" on Github for status.")])])}),[],!1,null,null,null);t.default=n.exports}}]);